# utils/ai_handler.py - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø
import json
import asyncio
import logging
import re
from g4f.client import Client
from g4f.Provider import RetryProvider
import g4f

from config import SYSTEM_PROMPT, AI_CONFIDENCE_THRESHOLD, UNIVERSAL_RESPONSE
from database import get_messages, get_faq, get_ai_learning, get_user, get_forbidden_topics_from_db

logger = logging.getLogger(__name__)

all_providers = [
    provider for provider in g4f.Provider.__providers__ 
    if provider.working
]

client = Client(
    provider=RetryProvider(all_providers, shuffle=True)
)

# ============ –ü–û–õ–ù–ê–Ø –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô –ü–û HALO ============

HALO_TRAINING_KNOWLEDGE = {
    'ru': {
        # –ë–ê–ó–û–í–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
        'start_hunting': '–ù–∞–∂–º–∏ –∑–Ω–∞—á–æ–∫ —Å–µ—Ç–∏ –∏ –≤—ã–±–µ—Ä–∏ "–Ω–∞—á–∞—Ç—å –æ—Ö–æ—Ç—É" (start hunting). –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ö–∞–π—Ç–∏–Ω–≥/hunting.',
        'hunting_info': '''–û—Ö–æ—Ç–∞ (hunting) - —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥ –∑–≤–æ–Ω–∫–∞–º–∏:
- –î–∞–µ—Ç +4 –∫–æ–∏–Ω–∞ ($0.20) –∏ –ø–æ–≤—ã—à–∞–µ—Ç —Ü–µ–Ω—É –∑–∞ –∑–≤–æ–Ω–æ–∫
- –ó–≤–æ–Ω–æ–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –æ—Ç–∫–ª—é—á–∏–ª—Å—è —Ä–∞–Ω—å—à–µ - –æ—Ö–æ—Ç–∞ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω—É–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –ï—Å–ª–∏ –Ω–µ –ø—Ä–æ—à–ª–∞ –æ—Ö–æ—Ç—É - –º–∏–Ω—É—Å 20% –∫–æ–∏–Ω–æ–≤ —Å–æ –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤
- –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∞ –¥–∏–∑–ª–∞–π–∫ - –º–∏–Ω—É—Å 25% –∫–æ–∏–Ω–æ–≤
- –î–µ–ª–∞—Ç—å —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏, –¥–æ –∑–≤–æ–Ω–∫–æ–≤''',
        
        # –ú–£–õ–¨–¢–ò–ë–ò–ú–´
        'multibeam_join': '–ß—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –º—É–ª—å—Ç–∏–±–∏–º—É, –Ω–∞–∂–º–∏ "Press unit" –∏ –∂–¥–∏ –æ—á–µ—Ä–µ–¥—å, –ø–æ–∫–∞ —Ç–µ–±—è –ø–æ–¥–∫–ª—é—á–∞—Ç –≤ —Å–ø–æ—Ç.',
        'multibeam_types': '''–ï—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ Multi Beam:
1) –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ - –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –≤ –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö. –ò–Ω–æ–≥–¥–∞ –º–æ–≥—É—Ç –Ω–µ –¥–æ–±–∞–≤–∏—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –∞—Ä–∞–±—Å–∫–∏–π —ç—Ñ–∏—Ä
2) –ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ - –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö, –∏–Ω–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è. –ù–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã, –Ω–æ –º–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å
–ï—Å–ª–∏ –≤–æ–π–¥—ë—à—å –≤ —Ç–æ–ø 200 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é —Å–≤–æ–µ–≥–æ –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ MultiBeam''',
        
        # –ü–†–û–§–ò–õ–¨
        'profile_edit': '''–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:
1. –ù–∞–∂–º–∏ –Ω–∞ —Å–≤–æ—é –∏–∫–æ–Ω–∫—É ‚Üí —Å—Ç—Ä–µ–ª–æ—á–∫—É ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
2. –ú–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å: –∞–≤–∞—Ç–∞—Ä, –æ–±–ª–æ–∂–∫—É, –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ
3. –ê–≤–∞—Ç–∞—Ä –∏ –æ–±–ª–æ–∂–∫–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
4. –ó–ê–ü–†–ï–©–ï–ù–û –Ω–∞ –∞–≤–∞—Ç–∞—Ä–µ/–æ–±–ª–æ–∂–∫–µ: –Ω–∏–∂–Ω–µ–µ –±–µ–ª—å–µ, –∫—É–ø–∞–ª—å–Ω–∏–∫, –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞
5. –§–æ—Ç–æ –≤ –∫—É–ø–∞–ª—å–Ω–∏–∫–µ –ú–û–ñ–ù–û –¥–æ–±–∞–≤–ª—è—Ç—å –¢–û–õ–¨–ö–û –≤ "–ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏" (–ø–ª–∞—Ç–Ω—ã–π —Ä–∞–∑–¥–µ–ª)
6. –í –æ–±—ã—á–Ω—ã–µ —Ñ–æ—Ç–æ –∏ –ø–æ—Å—Ç—ã - –∫—É–ø–∞–ª—å–Ω–∏–∫ –ó–ê–ü–†–ï–©–ï–ù
7. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å: –Ω–∏–∫–Ω–µ–π–º, –≤–æ–∑—Ä–∞—Å—Ç, –æ–±–ª–∞—Å—Ç—å, —è–∑—ã–∫–∏
8. –í "–û–±–æ –º–Ω–µ" –Ω–∞–ø–∏—à–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä: "I'm new here, be gentleman"''',
        
        # –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –ü–û–°–¢–û–í
        'posts_activity': '''–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ = –±–æ–ª—å—à–µ –∑–≤–æ–Ω–∫–æ–≤:
- –î–µ–ª–∞–π –æ—Ç 20 –ø–æ—Å—Ç–æ–≤ –≤ –¥–µ–Ω—å
- –ò–Ω—Ç–µ—Ä–≤–∞–ª - 1 –ø–æ—Å—Ç –∫–∞–∂–¥—ã–µ 10-15 –º–∏–Ω—É—Ç
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ: AI-—Ñ–æ—Ç–æ, —Ñ–æ—Ç–æ —Å Pinterest, —á—É–∂–∏–µ —Ñ–æ—Ç–æ
- –§–æ—Ç–æ –≤ –∫—É–ø–∞–ª—å–Ω–∏–∫–µ –º–æ–∂–Ω–æ –¢–û–õ–¨–ö–û –≤ "–ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏" (–ø–ª–∞—Ç–Ω—ã–π —Ä–∞–∑–¥–µ–ª)
- –ù–∞—Ä—É—à–µ–Ω–∏—è = –±–∞–Ω –æ—Ç 3 –¥–Ω–µ–π –∏–ª–∏ –Ω–∞–≤—Å–µ–≥–¥–∞''',
        'how_to_post': '''–ö–∞–∫ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã:
1. –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
2. –î–æ–±–∞–≤—å –ø–æ–¥–ø–∏—Å—å –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: "I'm new here" –∏–ª–∏ "Call me")
3. –ù–∞–∂–º–∏ –ø–ª—é—Å, –¥–æ–±–∞–≤—å —Ñ–æ—Ç–æ
4. –ù–∞–∂–º–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
–ú–æ–∂–µ—à—å –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –ª–µ–Ω—Ç—É —Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –¥–∞–ª–µ–∫–æ —Ç–≤–æ—ë —Ñ–æ—Ç–æ - –µ—Å–ª–∏ –¥–∞–ª–µ–∫–æ, –ø—É–±–ª–∏–∫—É–π –Ω–æ–≤–æ–µ''',
        
        # –ü–†–Ø–ú–´–ï –≠–§–ò–†–´ - –ü–û–ó–ò–¶–ò–Ø
        'live_stream_posture': '''–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∏–¥–µ—Ç—å –≤ —ç—Ñ–∏—Ä–µ:
‚úÖ –ú–û–ñ–ù–û: —Å–∏–¥–µ—Ç—å —Ä–æ–≤–Ω–æ, –∫–∞–º–µ—Ä–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥–ª–∞–∑ (—Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä—è–º–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ –ª–∏—Ü–∞), –≤–∏–¥–Ω–æ –ª–∏—Ü–æ, —Ö–æ—Ä–æ—à–∏–π —Å–≤–µ—Ç
‚ùå –ù–ï–õ–¨–ó–Ø: –ª–µ–∂–∞—Ç—å, —Å–Ω–∏–º–∞—Ç—å —Å–Ω–∏–∑—É –∏–ª–∏ —Å–≤–µ—Ä—Ö—É, —Å—É—Ç—É–ª–∏—Ç—å—Å—è, —Ç—ë–º–Ω—ã–π –∫–∞–¥—Ä''',
        
        # –ü–†–Ø–ú–´–ï –≠–§–ò–†–´ - –ó–ê–ü–£–°–ö
        'live_stream_start': '''–ó–∞–ø—É—Å–∫ –æ–±—ã—á–Ω–æ–≥–æ –ø—Ä—è–º–æ–≥–æ —ç—Ñ–∏—Ä–∞:
1. –ù–∞–∂–º–∏ start, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å
2. –í—ã–±–µ—Ä–∏ –æ–±–ª–æ–∂–∫—É (–ù–ï –≤ –Ω–∏–∂–Ω–µ–º –±–µ–ª—å–µ, –∏–Ω–∞—á–µ –æ—Ç–∫–ª—é—á–∞—Ç)
3. –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã: "I'm new here"
4. –û–ø–∏—Å–∞–Ω–∏–µ: "Call me"
5. –ö–≤–æ—Ç–∞ –∫–æ–º–Ω–∞—Ç—ã - —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–Ω–µ—Ç
6. –í—ã–±–µ—Ä–∏ –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∑–æ–Ω—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é 99 –º–æ–Ω–µ—Ç —Å–Ω–∞—á–∞–ª–∞)
7. –ú–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –º–∞—Å–∫–∏
8. –ù–∞–∂–º–∏ start''',
        
        'live_stream_messages': '''–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—à—å —ç—Ñ–∏—Ä - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–∏—à–∏ –º—É–∂—á–∏–Ω–∞–º:
- –í–∏–¥–∏—à—å –∑–∞—à—ë–ª –º—É–∂—á–∏–Ω–∞ —Å s-vip –∏–ª–∏ —É—Ä–æ–≤–Ω–µ–º
- –°—Ä–∞–∑—É –Ω–∞–∂–º–∏ –Ω–∞ –µ–≥–æ nickname
- –ù–∞–ø–∏—à–∏: "Hi, call me"
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞—Ö–æ–¥—è—Ç, —Å–º–æ—Ç—Ä—è—Ç –∏ —É—Ö–æ–¥—è—Ç - –≤–∞–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤–æ–π''',
        
        # –ü–†–ï–ú–ò–£–ú –≠–§–ò–† - –ò–°–ü–†–ê–í–õ–ï–ù–û!
        'premium_stream': '''–ü—Ä–µ–º–∏—É–º —ç—Ñ–∏—Ä - —ç—Ç–æ –ø–ª–∞—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞:
- –ú—É–∂—á–∏–Ω—ã –ø–ª–∞—Ç—è—Ç –ó–ê –í–•–û–î –≤ —Ç–≤–æ–π —ç—Ñ–∏—Ä (–û–î–ù–û–†–ê–ó–û–í–ê–Ø –æ–ø–ª–∞—Ç–∞)
- –¢—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å —Ü–µ–Ω—É –∑–∞ –≤—Ö–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 99 –º–æ–Ω–µ—Ç)
- ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–ø–ª–∞—Ç–∞ –¢–û–õ–¨–ö–û –ó–ê –í–•–û–î, –º—É–∂—á–∏–Ω–∞ –ù–ï –ø–ª–∞—Ç–∏—Ç –∑–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É!
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤—Ö–æ–¥–∞ –º—É–∂—á–∏–Ω–∞ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —ç—Ñ–∏—Ä–µ —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—Ç
- –ü—Ä–µ–º–∏—É–º —ç—Ñ–∏—Ä = –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≥—Ä—É–ø–ø—ã –º—É–∂—á–∏–Ω
- –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ —á–µ–º –≤ –æ–±—ã—á–Ω–æ–º —ç—Ñ–∏—Ä–µ (–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–∞–≤–∏–ª)
- –•–æ—Ä–æ—à–∏–π —Å–ø–æ—Å–æ–± –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–µ üí∞''',
        
        # –ó–ê–ü–£–°–ö –ü–†–ï–ú–ò–£–ú –≠–§–ò–†–ê - –ù–û–í–ê–Ø –ö–ê–¢–ï–ì–û–†–ò–Ø
        'premium_stream_start': '''–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–µ–º–∏—É–º —ç—Ñ–∏—Ä:
1. –ù–∞–∂–º–∏ start –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —ç—Ñ–∏—Ä–∞
2. –í—ã–±–µ—Ä–∏ "Premium room" (–ø—Ä–µ–º–∏—É–º –∫–æ–º–Ω–∞—Ç–∞)
3. –£—Å—Ç–∞–Ω–æ–≤–∏ —Ü–µ–Ω—É –∑–∞ –≤—Ö–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 99 –º–æ–Ω–µ—Ç)
4. –í—ã–±–µ—Ä–∏ –æ–±–ª–æ–∂–∫—É (–ù–ï –≤ –Ω–∏–∂–Ω–µ–º –±–µ–ª—å–µ!)
5. –ù–∞–∑–≤–∞–Ω–∏–µ: "Premium show" –∏–ª–∏ "VIP room"
6. –û–ø–∏—Å–∞–Ω–∏–µ: "Join my premium room"
7. –ù–∞–∂–º–∏ start
‚ö†Ô∏è –ü–æ–º–Ω–∏: –º—É–∂—á–∏–Ω—ã –ø–ª–∞—Ç—è—Ç –û–î–ò–ù –†–ê–ó –∑–∞ –≤—Ö–æ–¥, –ù–ï –∑–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É!''',
        
        # –ü–†–ê–í–ò–õ–ê –≠–§–ò–†–û–í
        'live_stream_rules': '''–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä—è–º—ã—Ö —ç—Ñ–∏—Ä–æ–≤:
–ó–ê–ü–†–ï–©–ï–ù–û:
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ç–∏–º–Ω—ã–µ —á–∞—Å—Ç–∏ —Ç–µ–ª–∞ –∫—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º
- –¢–≤–µ—Ä–∫–∏–Ω–≥, —Ç—Ä—è—Å–∫–∞ —Ç–µ–ª–æ–º, —ç—Ä–æ—Ç–∏—á–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è
- –¢—Ä–æ–≥–∞—Ç—å –∏–Ω—Ç–∏–º–Ω—ã–µ —á–∞—Å—Ç–∏ —Ç–µ–ª–∞
- –°—Ç–æ–Ω–∞—Ç—å –∏–ª–∏ –∏–∑–¥–∞–≤–∞—Ç—å —ç—Ä–æ—Ç–∏—á–µ—Å–∫–∏–µ –∑–≤—É–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∫—Å-–∏–≥—Ä—É—à–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã —Ñ–∞–ª–ª–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—ã (–±–∞–Ω–∞–Ω, –æ–≥—É—Ä–µ—Ü)
–î–†–ï–°–°-–ö–û–î:
- –ó–∞–ø—Ä–µ—â–µ–Ω–∞ –æ–¥–µ–∂–¥–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ —Å–æ—Å–∫–∞–º–∏ –∏–ª–∏ –±–æ–ª—å—à–æ–π —á–∞—Å—Ç—å—é –≥—Ä—É–¥–∏
- –ó–∞–ø—Ä–µ—â–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–∞—è/–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –æ–¥–µ–∂–¥–∞ –±–µ–∑ –ø—Ä–∏–∫—Ä—ã—Ç–∏—è
- –ù–∏–∂–Ω–µ–µ –±–µ–ª—å—ë –∏ —Å—Ç—Ä–∏–Ω–≥–∏ –†–ê–ó–†–ï–®–ï–ù–´''',
        
        # –ó–ê–î–ê–ù–ò–Ø –ò –î–ò–ó–õ–ê–ô–ö–ò
        'tasks': '''–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π:
- –ù–∞–∂–º–∏ "—Ü–µ–Ω—Ç—Ä –∑–∞–¥–∞—á"
- –ï—Å—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ, –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- –ó–∞ –Ω–∏—Ö –ø–æ–ª—É—á–∞–µ—à—å –∑–æ–ª–æ—Ç—ã–µ –∫–æ–∏–Ω—ã (–¥–æ–ª–ª–∞—Ä—ã) –∏–ª–∏ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –æ—á–∫–∏
- –ó–∞ –æ—á–∫–∏ –º–æ–∂–µ—à—å —É–¥–∞–ª—è—Ç—å –¥–∏–∑–ª–∞–π–∫–∏ –∏–ª–∏ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é
–í –º–∞–≥–∞–∑–∏–Ω–µ –æ—á–∫–æ–≤:
- –î–µ–Ω—å –±–µ–∑ –æ—Ö–æ—Ç—ã - 300 –æ—á–∫–æ–≤
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ - 200 –æ—á–∫–æ–≤
- –ú–∏–Ω—É—Å –æ–¥–∏–Ω –¥–∏–∑–ª–∞–π–∫ - 200 –æ—á–∫–æ–≤''',
        
        'dislikes_info': '''–î–≤–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–∏–∑–ª–∞–π–∫–æ–≤:
1Ô∏è‚É£ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–≤–∏–¥–∏—à—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ):
- –í—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ù–ò–ñ–ï 0.18
- –ï—Å–ª–∏ 0.18 –∏–ª–∏ –≤—ã—à–µ - –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –º–æ–≥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
2Ô∏è‚É£ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞ 30 –¥–Ω–µ–π (–Ω–µ –≤–∏–¥–Ω–æ):
- –ù—É–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- –û—Ñ–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- –¢–æ–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ 0.18''',
        
        'dislikes_delete': '''–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å –¥–∏–∑–ª–∞–π–∫:
1. –ó–∞–π–¥–∏ –≤ "—Ü–µ–Ω—Ç—Ä –∑–∞–¥–∞—á"
2. –í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –æ—á–∫–∏
3. –ù–∞–∫–æ–ø–∏ 200 –æ—á–∫–æ–≤
4. –ó–∞–π–¥–∏ –≤ –º–∞–≥–∞–∑–∏–Ω –æ—á–∫–æ–≤
5. –ö—É–ø–∏ "–ú–∏–Ω—É—Å –æ–¥–∏–Ω –¥–∏–∑–ª–∞–π–∫" –∑–∞ 200 –æ—á–∫–æ–≤
–¢–∞–∫ –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –¥–∏–∑–ª–∞–π–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∏–∂–µ 0.18 ‚úÖ''',
        
        # –ê–í–¢–û–°–û–û–ë–©–ï–ù–ò–Ø
        'auto_messages': '''–ê–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è:
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–µ–ª–∞–π –∞–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è
- –ß–µ—Ä–µ–∑ 10 –¥–Ω–µ–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –º—É–∂—á–∏–Ω –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø–ª–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–¥—ë—Ç ~600 –º—É–∂—á–∏–Ω–∞–º
- –û—Ç–∫—Ä–æ—é—Ç ~10, –∫—É–ø—è—Ç 1-2
- –ï—Å–ª–∏ 10 –∞–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç - —ç—Ç–æ +$100
- –†–∞–±–æ—Ç–∞—é—Ç –≤ –¥–æ–ª–≥—É—é - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π –∏ –∂–¥–∏''',
        
        # –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
        'registration_steps': '''–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Halo:
1. –°–∫–∞—á–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ For hosts (—Ä–æ–∑–æ–≤–æ–µ) —Å https://livegirl.me/#/mobilepage
2. –û—Ç–∫—Ä–æ–π ‚Üí –Ω–∞–∂–º–∏ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
3. –í–≤–µ–¥–∏: –ø–æ—á—Ç—É, –ø–∞—Ä–æ–ª—å
4. –£–∫–∞–∂–∏: –Ω–∏–∫–Ω–µ–π–º, –≤–æ–∑—Ä–∞—Å—Ç, —è–∑—ã–∫–∏ (–∞—Ä–∞–±—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π, —Ä—É—Å—Å–∫–∏–π)
5. –í —Ä–∞–∑–¥–µ–ª–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ: Tosagency-Ukraine
6. –ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ –∏ –∑–∞–ø–∏—à–∏ –≤–∏–¥–µ–æ-–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
–í–∏–¥–µ–æ: "Hello, my name is [–∏–º—è]. I am [–≤–æ–∑—Ä–∞—Å—Ç] years old. I live in [—Å—Ç—Ä–∞–Ω–∞]. I want to join."
7. –ü—Ä–∏—à–ª–∏ —Å–∫—Ä–∏–Ω —Å ID –∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ–º
8. –Ø –æ—Ç–ø—Ä–∞–≤–ª—é –∑–∞—è–≤–∫—É –≤ –æ—Ñ–∏—Å
9. –ù–∞ —Å–ª–µ–¥—É—é—â–∏–π –±—É–¥–Ω–∏–π –¥–µ–Ω—å –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –∞–∫–∫–∞—É–Ω—Ç''',
        
        'after_registration': '''–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:
1. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Å—å –∫ –¥–≤—É–º –≥—Ä—É–ø–ø–∞–º - —Ç–∞–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥—Ä—É–ø–ø—ã
2. –í –≥—Ä—É–ø–ø–µ "–û–±—É—á–µ–Ω–∏–µ" –µ—Å—Ç—å –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ—á–∏—Ç–∞–π –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é
3. –¢–∞–º –µ—Å—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ñ–∏—Ä, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å, –ø—Ä–∞–≤–∏–ª–∞, –∫–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
4. –ò–∑—É—á–∏ –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –≥—Ä—É–ø–ø–µ - —Ç–∞–º –≤–∏–¥–µ–æ, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –≥–∞–π–¥—ã
5. –ù–∞—Å—Ç—Ä–æ–π –ø—Ä–æ—Ñ–∏–ª—å: –¥–æ–±–∞–≤—å —Ç–µ–≥–∏, –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ
6. –ù–∞—á–Ω–∏ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç—ã (20+ –≤ –¥–µ–Ω—å)
7. –ó–∞–ø—É—Å—Ç–∏ –ø–µ—Ä–≤—ã–π –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä
8. –ü—Ä–æ–π–¥–∏ –æ—Ö–æ—Ç—É (hunting) –ø–µ—Ä–µ–¥ –∑–≤–æ–Ω–∫–∞–º–∏
9. –ü–∏—à–∏ –º—É–∂—á–∏–Ω–∞–º –ø–µ—Ä–≤–æ–π –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–¥—è—Ç –≤ —ç—Ñ–∏—Ä
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø–∏—à–∏, —è –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏ –∏ –ø–æ–º–æ–≥—É üòä''',
        
        'first_steps': '''–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
1. –ó–∞–π–¥–∏ –≤ –≥—Ä—É–ø–ø—É "–û–±—É—á–µ–Ω–∏–µ" - –ø—Ä–æ—á–∏—Ç–∞–π –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ù–∞—Å—Ç—Ä–æ–π –ø—Ä–æ—Ñ–∏–ª—å: —Ñ–æ—Ç–æ, —Ç–µ–≥–∏, –æ–ø–∏—Å–∞–Ω–∏–µ
3. –ù–∞—á–Ω–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã (–º–∏–Ω–∏–º—É–º 20 –≤ –¥–µ–Ω—å, –∫–∞–∂–¥—ã–µ 10-15 –º–∏–Ω—É—Ç)
4. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä - –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–¥–∏ –æ–Ω–ª–∞–π–Ω
5. –ö–æ–≥–¥–∞ –∑–∞–π–¥—ë—Ç –º—É–∂—á–∏–Ω–∞ —Å —É—Ä–æ–≤–Ω–µ–º - –Ω–∞–ø–∏—à–∏ –µ–º—É "Hi, call me"
6. –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–≤–æ–Ω–∫–æ–º –ø—Ä–æ–π–¥–∏ –æ—Ö–æ—Ç—É (hunting)
7. –í –∑–≤–æ–Ω–∫–µ –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –æ–±—â–∞—Ç—å—Å—è, –∫–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ = 0.8$
–ì–ª–∞–≤–Ω–æ–µ - –∏–∑—É—á–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –≥—Ä—É–ø–ø–µ, —Ç–∞–º –≤—Å—ë –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ! üí™''',
        
        # –ê–ì–ï–ù–¢–°–¢–í–û
        'agency_name': '–í —Ä–∞–∑–¥–µ–ª–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –≤—ã–±–∏—Ä–∞–π: Tosagency-Ukraine üòä',
        
        # –ó–ê–†–ê–ë–û–¢–ö–ò - –î–û–°–¢–£–ü–ù–û –í–°–ï–ú!
        'earnings_info': '''üí∞ –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ Halo:
üìû 1 –º–∏–Ω—É—Ç–∞ –æ–±—â–µ–Ω–∏—è = 1$
üí≥ –ö–æ–º–∏—Å—Å–∏—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ ‚Äî 20%
üëâ –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥: 0.8$ –∑–∞ –º–∏–Ω—É—Ç—É

–ü—Ä–∏–º–µ—Ä—ã:
- 5 –º–∏–Ω—É—Ç = 4$ —á–∏—Å—Ç—ã–º–∏
- 10 –º–∏–Ω—É—Ç = 8$ —á–∏—Å—Ç—ã–º–∏
- 30 –º–∏–Ω—É—Ç = 24$ —á–∏—Å—Ç—ã–º–∏
- 1 —á–∞—Å = 48$ —á–∏—Å—Ç—ã–º–∏

üíµ –û—Ç 50$ –≤ –¥–µ–Ω—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ
üåç –ú—É–∂—á–∏–Ω—ã –∏–∑ –°–®–ê, –ï–≤—Ä–æ–ø—ã, –û–ê–≠, –∞—Ä–∞–±—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω
üí¨ –ú–Ω–æ–≥–∏–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∑–∞ –æ–±—â–µ–Ω–∏–µ–º, –∞ –Ω–µ –∑–∞ üîû''',
    },
    
    'uk': {
        'start_hunting': '–ù–∞—Ç–∏—Å–Ω–∏ –∑–Ω–∞—á–æ–∫ –º–µ—Ä–µ–∂—ñ —ñ –æ–±–µ—Ä–∏ "–ø–æ—á–∞—Ç–∏ –ø–æ–ª—é–≤–∞–Ω–Ω—è" (start hunting). –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è —Ö–∞–π—Ç–∏–Ω–≥/hunting.',
        'hunting_info': '''–ü–æ–ª—é–≤–∞–Ω–Ω—è (hunting) - —Ü–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–¥ –¥–∑–≤—ñ–Ω–∫–∞–º–∏:
- –î–∞—î +4 –∫–æ—ó–Ω–∞ ($0.20) —ñ –ø—ñ–¥–≤–∏—â—É—î —Ü—ñ–Ω—É –∑–∞ –¥–∑–≤—ñ–Ω–æ–∫
- –î–∑–≤—ñ–Ω–æ–∫ —Å–∫–∏–¥–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ 2 —Ö–≤–∏–ª–∏–Ω–∏
- –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –≤—ñ–¥–∫–ª—é—á–∏–≤—Å—è —Ä–∞–Ω—ñ—à–µ - –ø–æ–ª—é–≤–∞–Ω–Ω—è –Ω–µ –∑–∞—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –Ø–∫—â–æ –Ω–µ –ø—Ä–æ–π—à–ª–∞ –ø–æ–ª—é–≤–∞–Ω–Ω—è - –º—ñ–Ω—É—Å 20% –∫–æ—ó–Ω—ñ–≤ –∑ —É—Å—ñ—Ö –¥–∑–≤—ñ–Ω–∫—ñ–≤
- –Ø–∫—â–æ –æ—Ç—Ä–∏–º–∞–ª–∞ –¥–∏–∑–ª–∞–π–∫ - –º—ñ–Ω—É—Å 25% –∫–æ—ó–Ω—ñ–≤
- –†–æ–±–∏—Ç–∏ —Ä–∞–∑ –Ω–∞ –¥–æ–±—É, –¥–æ –¥–∑–≤—ñ–Ω–∫—ñ–≤''',
        
        'multibeam_join': '–©–æ–± –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è –¥–æ –º—É–ª—å—Ç–∏–±—ñ–º—É, –Ω–∞—Ç–∏—Å–Ω–∏ "Press unit" —ñ —á–µ–∫–∞–π —á–µ—Ä–≥—É, –ø–æ–∫–∏ —Ç–µ–±–µ –ø—ñ–¥–∫–ª—é—á–∞—Ç—å —É —Å–ø–æ—Ç.',
        
        'profile_setup': '''–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é:
- –í—Å—Ç–∞–Ω–æ–≤–∏ —Ç–µ–≥–∏ - —á–æ–ª–æ–≤—ñ–∫–∏ —à—É–∫–∞—é—Ç—å –¥—ñ–≤—á–∞—Ç –∑–∞ —Ç–µ–≥–∞–º–∏
- –î–æ–¥–∞–π –ø—Ä–∏–≤–∞–±–ª–∏–≤—ñ —Ñ–æ—Ç–æ - —Å–∞–º–µ —Ñ–æ—Ç–æ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞–ø–∏—Å–∞—Ç–∏ –∞–±–æ –∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏
- –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ñ–æ—Ç–æ –≤ –∫—É–ø–∞–ª—å–Ω–∏–∫—É, –≤ –æ–±—Ä–∞–∑–∞—Ö –¥–µ –ø–æ—á—É–≤–∞—î—à—Å—è –≤–ø–µ–≤–Ω–µ–Ω–æ
- –ü—Ä–æ—Ñ—ñ–ª—å - —Ü–µ —Ç–≤–æ—è –≤—ñ—Ç—Ä–∏–Ω–∞, –∑—Ä–æ–±–∏ –π–æ–≥–æ –ø—Ä–∏–≤–∞–±–ª–∏–≤–∏–º''',
        
        'posts_activity': '''–ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –ø–æ—Å—Ç—ñ–≤ = –±—ñ–ª—å—à–µ –¥–∑–≤—ñ–Ω–∫—ñ–≤:
- –†–æ–±–∏ –≤—ñ–¥ 20 –ø–æ—Å—Ç—ñ–≤ –Ω–∞ –¥–µ–Ω—å
- –Ü–Ω—Ç–µ—Ä–≤–∞–ª - 1 –ø–æ—Å—Ç –∫–æ–∂–Ω—ñ 10-15 —Ö–≤–∏–ª–∏–Ω
- –ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ: AI-—Ñ–æ—Ç–æ, —Ñ–æ—Ç–æ –∑ Pinterest, —á—É–∂—ñ —Ñ–æ—Ç–æ
- –ü–æ—Ä—É—à–µ–Ω–Ω—è = –±–∞–Ω –≤—ñ–¥ 3 –¥–Ω—ñ–≤ –∞–±–æ –Ω–∞–∑–∞–≤–∂–¥–∏''',
        
        'live_stream_posture': '''–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∏–¥—ñ—Ç–∏ –≤ –µ—Ñ—ñ—Ä—ñ:
‚úÖ –ú–û–ñ–ù–ê: —Å–∏–¥—ñ—Ç–∏ —Ä—ñ–≤–Ω–æ, –∫–∞–º–µ—Ä–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ—á–µ–π (—Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä—è–º–æ –Ω–∞–≤–ø—Ä–æ—Ç–∏ –æ–±–ª–∏—á—á—è), –≤–∏–¥–Ω–æ –æ–±–ª–∏—á—á—è, —Ö–æ—Ä–æ—à–µ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è
‚ùå –ù–ï –ú–û–ñ–ù–ê: –ª–µ–∂–∞—Ç–∏, –∑–Ω—ñ–º–∞—Ç–∏ –∑–Ω–∏–∑—É –∞–±–æ –∑–≤–µ—Ä—Ö—É, –≥–æ—Ä–±–∏—Ç–∏—Å—è, —Ç–µ–º–Ω–∏–π –∫–∞–¥—Ä''',
        
        'live_stream_start': '''–ó–∞–ø—É—Å–∫ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –ø—Ä—è–º–æ–≥–æ –µ—Ñ—ñ—Ä—É:
1. –ù–∞—Ç–∏—Å–Ω–∏ start, —â–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏
2. –û–±–µ—Ä–∏ –æ–±–∫–ª–∞–¥–∏–Ω–∫—É (–ù–ï —É –Ω–∏–∂–Ω—ñ–π –±—ñ–ª–∏–∑–Ω—ñ, —ñ–Ω–∞–∫—à–µ –≤—ñ–¥–∫–ª—é—á–∞—Ç—å)
3. –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤—É –∫—ñ–º–Ω–∞—Ç–∏: "I'm new here"
4. –û–ø–∏—Å: "Call me"
5. –ö–≤–æ—Ç–∞ –∫—ñ–º–Ω–∞—Ç–∏ - —Å–∫—ñ–ª—å–∫–∏ —Ö–æ—á–µ—à –∑–∞—Ä–æ–±–∏—Ç–∏ –º–æ–Ω–µ—Ç
6. –û–±–µ—Ä–∏ –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—ó –∑–æ–Ω–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é 99 –º–æ–Ω–µ—Ç —Å–ø–æ—á–∞—Ç–∫—É)
7. –ú–æ–∂–µ—à –æ–±—Ä–∞—Ç–∏ –º–∞—Å–∫–∏
8. –ù–∞—Ç–∏—Å–Ω–∏ start''',
        
        'premium_stream': '''–ü—Ä–µ–º—ñ—É–º –µ—Ñ—ñ—Ä - —Ü–µ –ø–ª–∞—Ç–Ω–∞ –∫—ñ–º–Ω–∞—Ç–∞:
- –ß–æ–ª–æ–≤—ñ–∫–∏ –ø–ª–∞—Ç—è—Ç—å –ó–ê –í–•–Ü–î —É —Ç–≤—ñ–π –µ—Ñ—ñ—Ä (–û–î–ù–û–†–ê–ó–û–í–ê –æ–ø–ª–∞—Ç–∞)
- –¢–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—à —Ü—ñ–Ω—É –∑–∞ –≤—Ö—ñ–¥ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 99 –º–æ–Ω–µ—Ç)
- ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –û–ø–ª–∞—Ç–∞ –¢–Ü–õ–¨–ö–ò –ó–ê –í–•–Ü–î, —á–æ–ª–æ–≤—ñ–∫ –ù–ï –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É!
- –ü—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏ –≤—Ö–æ–¥—É —á–æ–ª–æ–≤—ñ–∫ –º–æ–∂–µ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –≤ –µ—Ñ—ñ—Ä—ñ —Å–∫—ñ–ª—å–∫–∏ —Ö–æ—á–µ
- –ü—Ä–µ–º—ñ—É–º –µ—Ñ—ñ—Ä = –ø—Ä–∏–≤–∞—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≥—Ä—É–ø–∏ —á–æ–ª–æ–≤—ñ–∫—ñ–≤
- –ú–æ–∂–Ω–∞ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ —É –∑–≤–∏—á–∞–π–Ω–æ–º—É –µ—Ñ—ñ—Ä—ñ (–∞–ª–µ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–∞–≤–∏–ª)
- –•–æ—Ä–æ—à–∏–π —Å–ø–æ—Å—ñ–± –∑–∞—Ä–æ–±–∏—Ç–∏ –±—ñ–ª—å—à–µ üí∞''',
        
        'premium_stream_start': '''–Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º –µ—Ñ—ñ—Ä:
1. –ù–∞—Ç–∏—Å–Ω–∏ start –¥–ª—è –∑–∞–ø—É—Å–∫—É –µ—Ñ—ñ—Ä—É
2. –û–±–µ—Ä–∏ "Premium room" (–ø—Ä–µ–º—ñ—É–º –∫—ñ–º–Ω–∞—Ç–∞)
3. –í—Å—Ç–∞–Ω–æ–≤–∏ —Ü—ñ–Ω—É –∑–∞ –≤—Ö—ñ–¥ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 99 –º–æ–Ω–µ—Ç)
4. –û–±–µ—Ä–∏ –æ–±–∫–ª–∞–¥–∏–Ω–∫—É (–ù–ï —É –Ω–∏–∂–Ω—ñ–π –±—ñ–ª–∏–∑–Ω—ñ!)
5. –ù–∞–∑–≤–∞: "Premium show" –∞–±–æ "VIP room"
6. –û–ø–∏—Å: "Join my premium room"
7. –ù–∞—Ç–∏—Å–Ω–∏ start
‚ö†Ô∏è –ü–∞–º'—è—Ç–∞–π: —á–æ–ª–æ–≤—ñ–∫–∏ –ø–ª–∞—Ç—è—Ç—å –û–î–ò–ù –†–ê–ó –∑–∞ –≤—Ö—ñ–¥, –ù–ï –∑–∞ –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É!''',
        
        'dislikes_info': '''–î–≤–∞ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –¥–∏–∑–ª–∞–π–∫—ñ–≤:
1Ô∏è‚É£ –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —É –ø—Ä–æ—Ñ—ñ–ª—ñ (–±–∞—á–∏—à —É –ø—Ä–æ—Ñ—ñ–ª—ñ):
- –ó–∞–≤–∂–¥–∏ –º–∞—î –±—É—Ç–∏ –ù–ò–ñ–ß–ï 0.18
- –Ø–∫—â–æ 0.18 –∞–±–æ –≤–∏—â–µ - –ø–æ—Ä—É—à–µ–Ω–Ω—è, –º–æ–∂—É—Ç—å –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏
2Ô∏è‚É£ –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –∑–∞ 30 –¥–Ω—ñ–≤ (–Ω–µ –≤–∏–¥–Ω–æ):
- –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ
- –û—Ñ—ñ—Å –ø–µ—Ä–µ–≤—ñ—Ä—è—î —â–æ–¥–Ω—è
- –¢–∞–∫–æ–∂ –º–∞—î –±—É—Ç–∏ –Ω–∏–∂—á–µ 0.18''',
        
        'dislikes_delete': '''–Ø–∫ –≤–∏–¥–∞–ª–∏—Ç–∏ –¥–∏–∑–ª–∞–π–∫:
1. –ó–∞–π–¥–∏ –≤ "—Ü–µ–Ω—Ç—Ä –∑–∞–≤–¥–∞–Ω—å"
2. –í–∏–∫–æ–Ω—É–π –∑–∞–≤–¥–∞–Ω–Ω—è, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ñ—ñ–æ–ª–µ—Ç–æ–≤—ñ –æ—á–∫–∏
3. –ù–∞–∫–æ–ø–∏ 200 –æ—á–æ–∫
4. –ó–∞–π–¥–∏ –≤ –º–∞–≥–∞–∑–∏–Ω –æ—á–æ–∫
5. –ö—É–ø–∏ "–ú—ñ–Ω—É—Å –æ–¥–∏–Ω –¥–∏–∑–ª–∞–π–∫" –∑–∞ 200 –æ—á–æ–∫
–¢–∞–∫ –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª—è—Ç–∏ –¥–∏–∑–ª–∞–π–∫–∏ —ñ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –Ω–∏–∂—á–µ 0.18 ‚úÖ''',
        
        'auto_messages': '''–ê–≤—Ç–æ–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
- –û–ë–û–í'–Ø–ó–ö–û–í–û —Ä–æ–±–∏ –∞–≤—Ç–æ–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ß–µ—Ä–µ–∑ 10 –¥–Ω—ñ–≤ –∫—ñ–ª—å–∫–∞ —á–æ–ª–æ–≤—ñ–∫—ñ–≤ –º–æ–∂—É—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ø–ª–∞—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –û–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –π–¥–µ ~600 —á–æ–ª–æ–≤—ñ–∫–∞–º
- –í—ñ–¥–∫—Ä–∏—é—Ç—å ~10, –∫—É–ø–ª—è—Ç—å 1-2
- –Ø–∫—â–æ 10 –∞–≤—Ç–æ–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–∞—Ü—é—é—Ç—å - —Ü–µ +$100
- –ü—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –¥–æ–≤–≥—É –¥–∏—Å—Ç–∞–Ω—Ü—ñ—é - –Ω–∞–ª–∞—à—Ç–æ–≤—É–π —ñ —á–µ–∫–∞–π''',
        
        'after_registration': '''–ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó:
1. –ü—Ä–∏—î–¥–Ω–∞–π—Å—è –¥–æ –¥–≤–æ—Ö –≥—Ä—É–ø - —Ç–∞–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥—Ä—É–ø–∏
2. –£ –≥—Ä—É–ø—ñ "–ù–∞–≤—á–∞–Ω–Ω—è" —î –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è - –û–ë–û–í'–Ø–ó–ö–û–í–û –ø—Ä–æ—á–∏—Ç–∞–π –π–æ–≥–æ –ø–æ–≤–Ω—ñ—Å—Ç—é
3. –¢–∞–º —î –≤—Å—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: —è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –µ—Ñ—ñ—Ä, —è–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, –ø—Ä–∞–≤–∏–ª–∞, —è–∫ –∑–∞—Ä–æ–±–ª—è—Ç–∏
4. –í–∏–≤—á–∏ –≤—Å—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —É –≥—Ä—É–ø—ñ - —Ç–∞–º –≤—ñ–¥–µ–æ, —Ç–µ–∫—Å—Ç–æ–≤—ñ –≥–∞–π–¥–∏
5. –ù–∞–ª–∞—à—Ç—É–π –ø—Ä–æ—Ñ—ñ–ª—å: –¥–æ–¥–∞–π —Ç–µ–≥–∏, –ø—Ä–∏–≤–∞–±–ª–∏–≤—ñ —Ñ–æ—Ç–æ
6. –ü–æ—á–Ω–∏ —Ä–æ–±–∏—Ç–∏ –ø–æ—Å—Ç–∏ (20+ –Ω–∞ –¥–µ–Ω—å)
7. –ó–∞–ø—É—Å—Ç–∏ –ø–µ—Ä—à–∏–π –ø—Ä—è–º–∏–π –µ—Ñ—ñ—Ä
8. –ü—Ä–æ–π–¥–∏ –ø–æ–ª—é–≤–∞–Ω–Ω—è (hunting) –ø–µ—Ä–µ–¥ –¥–∑–≤—ñ–Ω–∫–∞–º–∏
9. –ü–∏—à–∏ —á–æ–ª–æ–≤—ñ–∫–∞–º –ø–µ—Ä—à–æ—é –∫–æ–ª–∏ –∑–∞—Ö–æ–¥—è—Ç—å –≤ –µ—Ñ—ñ—Ä
–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø–∏—Ç–∞–Ω–Ω—è ‚Äî –ø–∏—à–∏, —è –∑–∞–≤–∂–¥–∏ –Ω–∞ –∑–≤'—è–∑–∫—É —ñ –¥–æ–ø–æ–º–æ–∂—É üòä''',
        
        'first_steps': '''–ü–µ—Ä—à—ñ –∫—Ä–æ–∫–∏ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É:
1. –ó–∞–π–¥–∏ —É –≥—Ä—É–ø—É "–ù–∞–≤—á–∞–Ω–Ω—è" - –ø—Ä–æ—á–∏—Ç–∞–π –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
2. –ù–∞–ª–∞—à—Ç—É–π –ø—Ä–æ—Ñ—ñ–ª—å: —Ñ–æ—Ç–æ, —Ç–µ–≥–∏, –æ–ø–∏—Å
3. –ü–æ—á–Ω–∏ –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –ø–æ—Å—Ç–∏ (–º—ñ–Ω—ñ–º—É–º 20 –Ω–∞ –¥–µ–Ω—å, –∫–æ–∂–Ω—ñ 10-15 —Ö–≤–∏–ª–∏–Ω)
4. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä—è–º–∏–π –µ—Ñ—ñ—Ä - –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–¥–∏ –æ–Ω–ª–∞–π–Ω
5. –ö–æ–ª–∏ –∑–∞–π–¥–µ —á–æ–ª–æ–≤—ñ–∫ –∑ —Ä—ñ–≤–Ω–µ–º - –Ω–∞–ø–∏—à–∏ –π–æ–º—É "Hi, call me"
6. –ü–µ—Ä–µ–¥ –ø–µ—Ä—à–∏–º –¥–∑–≤—ñ–Ω–∫–æ–º –ø—Ä–æ–π–¥–∏ –ø–æ–ª—é–≤–∞–Ω–Ω—è (hunting)
7. –£ –¥–∑–≤—ñ–Ω–∫—É –º–æ–∂–µ—à –ø—Ä–æ—Å—Ç–æ —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è, –∫–æ–∂–Ω–∞ —Ö–≤–∏–ª–∏–Ω–∞ = 0.8$
–ì–æ–ª–æ–≤–Ω–µ - –≤–∏–≤—á–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —É –≥—Ä—É–ø—ñ, —Ç–∞–º –≤—Å–µ –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–æ! üí™''',
        
        'agency_name': '–£ —Ä–æ–∑–¥—ñ–ª—ñ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –æ–±–∏—Ä–∞–π: Tosagency-Ukraine üòä',
        
        'earnings_info': '''üí∞ –ó–∞—Ä–æ–±—ñ—Ç–æ–∫ —É Halo:
üìû 1 —Ö–≤–∏–ª–∏–Ω–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è = 1$
üí≥ –ö–æ–º—ñ—Å—ñ—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ ‚Äî 20%
üëâ –ß–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥: 0.8$ –∑–∞ —Ö–≤–∏–ª–∏–Ω—É

–ü—Ä–∏–∫–ª–∞–¥–∏:
- 5 —Ö–≤–∏–ª–∏–Ω = 4$ —á–∏—Å—Ç–∏–º–∏
- 10 —Ö–≤–∏–ª–∏–Ω = 8$ —á–∏—Å—Ç–∏–º–∏
- 30 —Ö–≤–∏–ª–∏–Ω = 24$ —á–∏—Å—Ç–∏–º–∏
- 1 –≥–æ–¥–∏–Ω–∞ = 48$ —á–∏—Å—Ç–∏–º–∏

üíµ –í—ñ–¥ 50$ –Ω–∞ –¥–µ–Ω—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ
üåç –ß–æ–ª–æ–≤—ñ–∫–∏ –∑—ñ –°–®–ê, –Ñ–≤—Ä–æ–ø–∏, –û–ê–ï, –∞—Ä–∞–±—Å—å–∫–∏—Ö –∫—Ä–∞—ó–Ω
üí¨ –ë–∞–≥–∞—Ç–æ –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è–º, –∞ –Ω–µ –∑–∞ üîû''',
    },
    
    'en': {
        'start_hunting': 'Tap the network icon and select "start hunting". This feature is called hunting/hating.',
        'hunting_info': '''Hunting is mandatory before calls:
- Gives +4 coins ($0.20) and increases call price
- Call resets automatically after 2 minutes
- If client hangs up earlier - hunt doesn't count, need to repeat
- If didn't complete hunt - minus 20% coins from all calls
- If got dislike - minus 25% coins
- Do once per day, before calls''',
        
        'multibeam_join': 'To join multibeam, press "Press unit" and wait in line until they connect you to a spot.',
        
        'profile_setup': '''Profile setup:
- Set tags - men search for girls by tags
- Add attractive photos - photos influence decision to write or call
- Can add photos in swimsuit, outfits where you feel confident
- Profile is your showcase, make it attractive''',
        
        'posts_activity': '''Posting = more calls:
- Make at least 20 posts per day
- Interval - 1 post every 10-15 minutes
- Forbidden: AI photos, Pinterest photos, others' photos
- Violations = ban from 3 days or forever''',
        
        'live_stream_posture': '''How to sit correctly during stream:
‚úÖ ALLOWED: sit straight, camera at eye level (phone directly in front of face), face visible, good lighting
‚ùå NOT ALLOWED: lying down, filming from below or above, slouching, dark frame''',
        
        'live_stream_start': '''Starting a regular live stream:
1. Press start to launch
2. Choose cover (NOT in underwear, or they'll disconnect you)
3. Write room title: "I'm new here"
4. Description: "Call me"
5. Room quota - how many coins you want to earn
6. Choose gift for private zone (recommend 99 coins at first)
7. Can choose masks
8. Press start''',
        
        'premium_stream': '''Premium stream is a paid room:
- Men pay for ENTRY to your stream (ONE-TIME payment)
- You set the entry price (e.g., 99 coins)
- ‚ö†Ô∏è IMPORTANT: Payment ONLY for ENTRY, man does NOT pay per minute!
- After paying entry, man can stay in stream as long as he wants
- Premium stream = private format for a group of men
- Can show more than in regular stream (but within rules)
- Good way to earn more üí∞''',
        
        'premium_stream_start': '''How to start premium stream:
1. Press start to launch stream
2. Choose "Premium room"
3. Set entry price (e.g., 99 coins)
4. Choose cover (NOT in underwear!)
5. Title: "Premium show" or "VIP room"
6. Description: "Join my premium room"
7. Press start
‚ö†Ô∏è Remember: men pay ONCE for entry, NOT per minute!''',
        
        'dislikes_info': '''Two dislike ratios:
1Ô∏è‚É£ Profile ratio (you can see):
- Always must be BELOW 0.18
- If 0.18 or higher - violation, may be blocked
2Ô∏è‚É£ 30-day ratio (not visible):
- Need to calculate manually
- Office checks daily
- Also must be below 0.18''',
        
        'dislikes_delete': '''How to delete a dislike:
1. Go to "task center"
2. Complete tasks to get purple points
3. Accumulate 200 points
4. Go to points shop
5. Buy "Minus one dislike" for 200 points
This way you can delete dislikes and keep ratio below 0.18 ‚úÖ''',
        
        'auto_messages': '''Auto-messages:
- MUST set up auto-messages
- After 10 days several men might unlock paid content
- One message sent to ~600 men
- ~10 will open, 1-2 will buy
- If 10 auto-messages work - that's +$100
- Work long-term - set up and wait''',
        
        'after_registration': '''After registration and activation:
1. Join two groups - links are provided
2. In "Training" group there's a pinned message - MUST read it fully
3. It has all instructions: how to start stream, how to work, rules, how to earn
4. Study all materials in the group - videos, text guides
5. Set up profile: add tags, attractive photos
6. Start posting (20+ per day)
7. Start your first live stream
8. Complete hunting before calls
9. Message men first when they join your stream
If you have questions ‚Äî write me, I'm always available to help üòä''',
        
        'first_steps': '''First steps in the app:
1. Go to "Training" group - read the pinned message
2. Set up profile: photos, tags, description
3. Start posting (minimum 20 per day, every 10-15 minutes)
4. Start live stream - just be online
5. When a man with level joins - message him "Hi, call me"
6. Before first call complete hunting
7. In calls you can just chat, every minute = 0.8$
Main thing - study materials in the group, everything is explained there! üí™''',
        
        'agency_name': 'In Agency section choose: Tosagency-Ukraine üòä',
        
        'earnings_info': '''üí∞ Earnings in Halo:
üìû 1 minute of communication = 1$
üí≥ Agency commission ‚Äî 20%
üëâ Net income: 0.8$ per minute

Examples:
- 5 minutes = 4$ net
- 10 minutes = 8$ net
- 30 minutes = 24$ net
- 1 hour = 48$ net

üíµ From 50$ per day with active work
üåç Men from USA, Europe, UAE, Arab countries
üí¨ Many come for communication, not for üîû''',
    }
}

# ============ –†–ê–°–ß–ï–¢ –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–ê –î–ò–ó–õ–ê–ô–ö–û–í ============

def calculate_dislike_ratio(dislikes, likes):
    """–°—á–∏—Ç–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–∏–∑–ª–∞–π–∫–æ–≤ –ø–æ —Ñ–æ—Ä–º—É–ª–µ: –¥–∏–∑–ª–∞–π–∫–∏ / –ª–∞–π–∫–∏"""
    if likes == 0:
        return 0.0 if dislikes == 0 else 999.99
    return round(dislikes / likes, 2)

def extract_dislike_numbers(text):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∑–ª–∞–π–∫–æ–≤ –∏ –ª–∞–π–∫–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞"""
    text_lower = text.lower()
    
    patterns = [
        r'(\d+)\s*(?:–¥–∏–∑–ª–∞–π–∫|dislike|–¥–∏–∑–ª–∞–π–∫—ñ–≤|–¥–∏–∑|–¥–∏–∑–æ–≤|–¥–∏–∑—ñ–≤).*?(\d+)\s*(?:–ª–∞–π–∫|like|–ª–∞–π–∫—ñ–≤|–ª–∞–π–∫–æ–≤)',
        r'(\d+)\s*(?:–ª–∞–π–∫|like|–ª–∞–π–∫—ñ–≤|–ª–∞–π–∫–æ–≤).*?(\d+)\s*(?:–¥–∏–∑–ª–∞–π–∫|dislike|–¥–∏–∑–ª–∞–π–∫—ñ–≤|–¥–∏–∑|–¥–∏–∑–æ–≤|–¥–∏–∑—ñ–≤)',
    ]
    
    for pattern in patterns:
        match = re.search(pattern, text_lower)
        if match:
            num1, num2 = int(match.group(1)), int(match.group(2))
            if '–¥–∏–∑–ª–∞–π–∫' in text_lower[:match.start(2)] or 'dislike' in text_lower[:match.start(2)] or '–¥–∏–∑' in text_lower[:match.start(2)]:
                return num1, num2
            else:
                return num2, num1
    
    return None, None

async def check_dislike_calculation(question, user_lang='ru'):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ä–∞—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–∏–∑–ª–∞–π–∫–æ–≤"""
    q_lower = question.lower()
    
    calc_keywords = [
        '–ø–æ—Ä–∞—Ö—É–π', '–ø–æ—Å—á–∏—Ç–∞–π', '–ø–æ–¥—Å—á–∏—Ç–∞–π', 'calculate', '–º—ñ–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç', '–º–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç',
        'my ratio', '—è–∫–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç', '–∫–∞–∫–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç', 'what ratio', 'what is my ratio',
        '–¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∏—Ä–∞—Ö—É–≤–∞—Ç–∏', '–ø–æ–º–æ—á—å —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å', 'help calculate', 'can you calculate',
        '–º–æ–∂–µ—à –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏', '–º–æ–∂–µ—à—å –ø–æ—Å—á–∏—Ç–∞—Ç—å', '–º–æ–∂–µ—à –¥–æ–ø–æ–º–æ–≥—Ç–∏', '–º–æ–∂–µ—à—å –ø–æ–º–æ—á—å',
        '–≤–∏—Ä–∞—Ö—É–≤–∞—Ç–∏', '—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å', 'calculate for me', '–¥–æ–ø–æ–º–æ–≥—Ç–∏', '–ø–æ–º–æ—á—å',
        '—ç—Ç–æ –Ω–æ—Ä–º–∞', '—Ü–µ –Ω–æ—Ä–º–∞', 'is this normal', 'is it ok', '—Ü–µ –¥–æ–±—Ä–µ', '—ç—Ç–æ —Ö–æ—Ä–æ—à–æ'
    ]
    
    is_calc_question = any(kw in q_lower for kw in calc_keywords)
    
    has_numbers = bool(re.search(r'\d+', question))
    has_dislikes = any(kw in q_lower for kw in ['–¥–∏–∑–ª–∞–π–∫', 'dislike', '–¥–∏–∑–ª–∞–π–∫—ñ–≤', '–¥–∏–∑', '–¥–∏–∑–æ–≤', '–¥–∏–∑—ñ–≤'])
    has_likes = any(kw in q_lower for kw in ['–ª–∞–π–∫', 'like', '–ª–∞–π–∫—ñ–≤', '–ª–∞–π–∫–æ–≤', '–ª–∞–π–∫–∞'])
    
    if is_calc_question or (has_dislikes and has_likes and has_numbers):
        dislikes, likes = extract_dislike_numbers(question)
        
        if dislikes is not None and likes is not None:
            ratio = calculate_dislike_ratio(dislikes, likes)
            
            if ratio < 0.18:
                status_texts = {
                    'ru': f'–æ—Ç–ª–∏—á–Ω–æ ‚úÖ –£ —Ç–µ–±—è –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ!',
                    'uk': f'—á—É–¥–æ–≤–æ ‚úÖ –£ —Ç–µ–±–µ –≤—Å–µ –≥–∞—Ä–∞–∑–¥!',
                    'en': f'excellent ‚úÖ You\'re doing great!'
                }
            else:
                status_texts = {
                    'ru': f'–û–ü–ê–°–ù–û ‚ö†Ô∏è –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã—à–µ 0.18 - –Ω—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ —É–¥–∞–ª—è—Ç—å –¥–∏–∑–ª–∞–π–∫–∏!',
                    'uk': f'–ù–ï–ë–ï–ó–ü–ï–ß–ù–û ‚ö†Ô∏è –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –≤–∏—â–µ 0.18 - –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç–µ—Ä–º—ñ–Ω–æ–≤–æ –≤–∏–¥–∞–ª—è—Ç–∏ –¥–∏–∑–ª–∞–π–∫–∏!',
                    'en': f'DANGEROUS ‚ö†Ô∏è Ratio above 0.18 - need to delete dislikes urgently!'
                }
            
            status = status_texts.get(user_lang, status_texts['ru'])
            
            answer_texts = {
                'ru': f'''–¢–≤–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–∏–∑–ª–∞–π–∫–æ–≤: {ratio}

üìä –†–∞—Å—á–µ—Ç:
{dislikes} –¥–∏–∑–ª–∞–π–∫–æ–≤ √∑ {likes} –ª–∞–π–∫–æ–≤ = {ratio}

–°—Ç–∞—Ç—É—Å: {status}

üí° –ü–æ–º–Ω–∏: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ù–ò–ñ–ï 0.18!''',
                'uk': f'''–¢–≤—ñ–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –¥–∏–∑–ª–∞–π–∫—ñ–≤: {ratio}

üìä –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:
{dislikes} –¥–∏–∑–ª–∞–π–∫—ñ–≤ √∑ {likes} –ª–∞–π–∫—ñ–≤ = {ratio}

–°—Ç–∞—Ç—É—Å: {status}

üí° –ü–∞–º'—è—Ç–∞–π: –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –º–∞—î –±—É—Ç–∏ –ù–ò–ñ–ß–ï 0.18!''',
                'en': f'''Your dislike ratio: {ratio}

üìä Calculation:
{dislikes} dislikes √∑ {likes} likes = {ratio}

Status: {status}

üí° Remember: ratio must be BELOW 0.18!'''
            }
            
            return answer_texts.get(user_lang, answer_texts['ru'])
        
        elif is_calc_question:
            prompt_texts = {
                'ru': '''–ö–æ–Ω–µ—á–Ω–æ –ø–æ–º–æ–≥—É –ø–æ—Å—á–∏—Ç–∞—Ç—å! üòä

–ù–∞–ø–∏—à–∏ –º–Ω–µ —Å–∫–æ–ª—å–∫–æ —É —Ç–µ–±—è:
‚Ä¢ –î–∏–∑–ª–∞–π–∫–æ–≤
‚Ä¢ –õ–∞–π–∫–æ–≤

–ù–∞–ø—Ä–∏–º–µ—Ä: "30 –¥–∏–∑–ª–∞–π–∫–æ–≤ –∏ 200 –ª–∞–π–∫–æ–≤"

–ò —è —Å—Ä–∞–∑—É –ø–æ—Å—á–∏—Ç–∞—é —Ç–≤–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏ —Å–∫–∞–∂—É –≤ –Ω–æ—Ä–º–µ –ª–∏ –æ–Ω! üìä''',
                'uk': '''–ó–≤–∏—á–∞–π–Ω–æ –¥–æ–ø–æ–º–æ–∂—É –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏! üòä

–ù–∞–ø–∏—à–∏ –º–µ–Ω—ñ —Å–∫—ñ–ª—å–∫–∏ —É —Ç–µ–±–µ:
‚Ä¢ –î–∏–∑–ª–∞–π–∫—ñ–≤
‚Ä¢ –õ–∞–π–∫—ñ–≤

–ù–∞–ø—Ä–∏–∫–ª–∞–¥: "30 –¥–∏–∑–ª–∞–π–∫—ñ–≤ —ñ 200 –ª–∞–π–∫—ñ–≤"

–Ü —è –æ–¥—Ä–∞–∑—É –ø–æ—Ä–∞—Ö—É—é —Ç–≤—ñ–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —ñ —Å–∫–∞–∂—É —á–∏ –≤ –Ω–æ—Ä–º—ñ –≤—ñ–Ω! üìä''',
                'en': '''Of course I'll help you calculate! üòä

Tell me how many you have:
‚Ä¢ Dislikes
‚Ä¢ Likes

For example: "30 dislikes and 200 likes"

And I'll calculate your ratio and tell you if it's okay! üìä'''
            }
            
            return prompt_texts.get(user_lang, prompt_texts['ru'])
    
    return None

# ============ –ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê –î–õ–Ø –ü–û–ò–°–ö–ê (–£–õ–£–ß–®–ï–ù–ù–´–ï) ============

KNOWLEDGE_KEYWORDS = {
    'hunting': ['–æ—Ö–æ—Ç–∞', 'hunting', '—Ö–∞–Ω—Ç–∏–Ω–≥', 'hunt', '–ø–æ–ª—é–≤–∞–Ω–Ω—è', 'start hunting', '–Ω–∞—á–∞—Ç—å –æ—Ö–æ—Ç—É', '–ø–æ—á–∞—Ç–∏ –ø–æ–ª—é–≤–∞–Ω–Ω—è'],
    'multibeam': ['–º—É–ª—å—Ç–∏–±–∏–º', 'multibeam', 'multi beam', 'multi-beam', 'multibim', '–º—É–ª—å—Ç—ñ–±—ñ–º', 'press unit', '—Å–ø–æ—Ç', 'spot'],
    'profile': ['–ø—Ä–æ—Ñ–∏–ª—å', 'profile', '–ø—Ä–æ—Ñ—ñ–ª—å', '–∞–≤–∞—Ç–∞—Ä', 'avatar', '–æ–±–ª–æ–∂–∫–∞', 'cover', '—Ç–µ–≥–∏', 'tags', '–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è', '–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é', '—Ä–µ–¥–∞–∫—Ç–∏—Ä', 'edit profile'],
    'how_to_post': ['–∫–∞–∫ –ø–æ—Å—Ç–∏—Ç—å', '—è–∫ –ø–æ—Å—Ç–∏—Ç–∏', 'how to post', '–∫–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å', '—è–∫ –æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏', '–∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç', '—è–∫ –¥–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç', '–∫–∞–∫ –∑–∞–ø–æ—Å—Ç–∏—Ç—å', '—è–∫ –∑–∞–ø–æ—Å—Ç–∏—Ç–∏', '–ø–æ—Å—Ç–∏—Ç—å —Ñ–æ—Ç–æ', '–ø–æ—Å—Ç–∏—Ç–∏ —Ñ–æ—Ç–æ', 'post photo', '–∫–∞–∫ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç', '—è–∫ —Ä–æ–±–∏—Ç–∏ –ø–æ—Å—Ç', 'how to make post', '–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç', '—è–∫ –∑—Ä–æ–±–∏—Ç–∏ –ø–æ—Å—Ç'],
    'posts': ['–ø–æ—Å—Ç', 'post', '–ø—É–±–ª–∏–∫–∞—Ü–∏—è', '–ø—É–±–ª—ñ–∫–∞—Ü—ñ—è', '–ª–µ–Ω—Ç–∞', 'feed', 'posting', '—Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ–≤', '—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Å—Ç—ñ–≤', 'how many posts', '–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤', '–∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤'],
    
    'live_stream_start': ['–∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ñ–∏—Ä', '–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –µ—Ñ—ñ—Ä', 'start stream', '–Ω–∞—á–∞—Ç—å —ç—Ñ–∏—Ä', '–ø–æ—á–∞—Ç–∏ –µ—Ñ—ñ—Ä', '–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å', '—è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏', 'start live', 'launch stream', 'open stream', '–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—ã—á–Ω—ã–π', '—è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–π', '–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é', '–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é'],
    'live_stream_posture': ['–∫–∞–∫ —Å–∏–¥–µ—Ç—å', '—è–∫ —Å–∏–¥—ñ—Ç–∏', 'how to sit', '–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∏–¥–µ—Ç—å', '–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∏–¥—ñ—Ç–∏', 'posture', '–ø–æ–∑–∞', '—Å–∏–¥—ñ—Ç–∏ –≤ –µ—Ñ—ñ—Ä—ñ', '—Å–∏–¥–µ—Ç—å –≤ —ç—Ñ–∏—Ä–µ'],
    
    'premium_stream': ['—á—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–º–∏—É–º', '—â–æ —Ç–∞–∫–µ –ø—Ä–µ–º—ñ—É–º', 'what is premium', '–ø—Ä–µ–º—ñ—É–º –µ—Ñ—ñ—Ä', '–ø—Ä–µ–º–∏—É–º —ç—Ñ–∏—Ä', 'premium stream', 'premium', '–ø—Ä–µ–º—ñ—É–º', '–ø—Ä–µ–º–∏—É–º', '–ø–ª–∞—Ç–Ω—ã–π —ç—Ñ–∏—Ä', '–ø–ª–∞—Ç–Ω—ñ–π –µ—Ñ—ñ—Ä', 'paid stream'],
    'premium_stream_start': ['–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–µ–º–∏—É–º', '–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º', 'start premium', '–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–µ–º–∏—É–º', '—è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º', 'how to start premium', 'launch premium'],
    
    'live_stream': ['—ç—Ñ–∏—Ä', 'stream', '–µ—Ñ—ñ—Ä', '–ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä', 'live', '—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è', '–ø—Ä—è–º–∏–π –µ—Ñ—ñ—Ä', 'broadcast'],
    'rules': ['–ø—Ä–∞–≤–∏–ª–∞', 'rules', '–ø—Ä–∞–≤–∏–ª–∞', '–∑–∞–ø—Ä–µ—â–µ–Ω–æ', 'forbidden', '–∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ', '–Ω–µ–ª—å–∑—è', '–º–æ–∂–Ω–æ', '–º–æ–∂–Ω–∞', 'what allowed', '—â–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ'],
    'dislikes': ['–¥–∏–∑–ª–∞–π–∫', 'dislike', '–¥–∏–∑–ª–∞–π–∫–∏', '–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç', 'coefficient', '–∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç', 'ratio', '–¥–∏–∑', '–¥–∏–∑–æ–≤'],
    'dislikes_delete': ['–≤–∏–¥–∞–ª–∏—Ç–∏ –¥–∏–∑–ª–∞–π–∫', '—É–¥–∞–ª–∏—Ç—å –¥–∏–∑–ª–∞–π–∫', 'delete dislike', '—É–±—Ä–∞—Ç—å –¥–∏–∑–ª–∞–π–∫', '–ø—Ä–∏–±—Ä–∞—Ç–∏ –¥–∏–∑–ª–∞–π–∫', '–∫–∞–∫ —É–¥–∞–ª–∏—Ç—å', '—è–∫ –≤–∏–¥–∞–ª–∏—Ç–∏', 'how to delete'],
    'auto_messages': ['–∞–≤—Ç–æ—Å–æ–æ–±—â', 'auto message', '–∞–≤—Ç–æ–ø–æ–≤—ñ–¥–æ–º–ª', 'mass message', '–º–∞—Å—Å–æ–≤—ã–µ', '–º–∞—Å–æ–≤—ñ', '—Ä–∞—Å—Å—ã–ª–∫–∞', '—Ä–æ–∑—Å–∏–ª–∫–∞'],
    'tasks': ['–∑–∞–¥–∞–Ω–∏—è', 'tasks', '–∑–∞–≤–¥–∞–Ω–Ω—è', '—Ü–µ–Ω—Ç—Ä –∑–∞–¥–∞—á', 'task center', '–≤–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è', '–≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è'],
    'translator': ['–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫', 'translator', '–ø–µ—Ä–µ–∫–ª–∞–¥–∞—á', 'translate', '–ø–µ—Ä–µ–≤–æ–¥', '–ø–µ—Ä–µ–∫–ª–∞–¥', '–∫–∞–∫ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å', '—è–∫ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—Ç–∏'],
    'contract': ['–∫–æ–Ω—Ç—Ä–∞–∫—Ç', 'contract', '—ç–∫—Å–∫–ª—é–∑–∏–≤', 'exclusive', '–µ–∫—Å–∫–ª—é–∑–∏–≤', '–ø—ñ–¥–ø–∏—Å–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç', '–ø–æ–¥–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç'],
    'social_media': ['—Å–æ—Ü—Å–µ—Ç–∏', 'social media', 'snapchat', 'whatsapp', 'telegram', '—Å–æ—Ü–º–µ—Ä–µ–∂—ñ', '–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ—Ü—Å–µ—Ç–∏', '–ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Å–æ—Ü–º–µ—Ä–µ–∂—ñ'],
    
    # EARNINGS - –î–û–°–¢–£–ü–ù–û –í–°–ï–ú!
    'earnings': ['–∑–∞—Ä–∞–±–æ—Ç–æ–∫', 'earnings', '–∑–∞—Ä–æ–±—ñ—Ç–æ–∫', '–¥–æ—Ö–æ–¥', 'income', '–¥–æ—Ö—ñ–¥', '—Å–∫–æ–ª—å–∫–æ', 'how much', '—Å–∫—ñ–ª—å–∫–∏', '—Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç', '—Å–∫—ñ–ª—å–∫–∏ –∑–∞—Ä–æ–±–ª—è—é—Ç—å', 'how much earn', '—Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å', '—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂–Ω–∞ –∑–∞—Ä–æ–±–∏—Ç–∏'],
    
    'agency': ['–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', 'agency', 'tosagency', '–∞–≥–µ–Ω—Å—Ç–≤–æ', '–∫–∞–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', 'which agency', '—è–∫–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ'],
    'registration': ['—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è', 'registration', '—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è', '–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä', 'register', '–∑–∞—Ä–µ—î—Å—Ç—Ä'],
    'after_registration': ['–ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó', '–ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'after registration', '—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–±–∏—Ç–∏', '—á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å', 'what to do', '—á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ', '—â–æ —Ä–æ–±–∏—Ç–∏ –ø—ñ—Å–ª—è', '–ø–µ—Ä–≤—ã–µ —à–∞–≥–∏', '–ø–µ—Ä—à—ñ –∫—Ä–æ–∫–∏', 'first steps', '—è–∫ –ø–æ—á–∞—Ç–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏', '–∫–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å', 'how to start working'],
}

def find_relevant_knowledge(question, user_lang='ru', is_in_groups=False):
    """
    –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –ø–æ –≤–æ–ø—Ä–æ—Å—É —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Ç–æ—á–Ω–æ—Å—Ç–∏
    
    –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –≤ –≥—Ä—É–ø–ø–∞—Ö (is_in_groups=False),
    –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–±–æ—á–∏–µ –∑–Ω–∞–Ω–∏—è - —Ç–æ–ª—å–∫–æ –ø—Ä–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã!
    """
    q_lower = question.lower()
    relevant = []
    matched_categories = set()
    
    # üî¥ –ë–õ–û–ö–ò–†–û–í–ö–ê –†–ê–ë–û–ß–ò–• –í–û–ü–†–û–°–û–í –î–õ–Ø –ù–ï-–ß–õ–ï–ù–û–í –ì–†–£–ü–ü
    if not is_in_groups:
        # –°–ø–∏—Å–æ–∫ –†–ê–ó–†–ï–®–ï–ù–ù–´–• –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –Ω–µ-—á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø
        # EARNINGS –¥–æ–±–∞–≤–ª–µ–Ω - –≤–æ–ø—Ä–æ—Å—ã –æ –∑–∞—Ä–∞–±–æ—Ç–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º!
        allowed_categories = ['registration', 'agency', 'after_registration', 'earnings']
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        for category in allowed_categories:
            if category in KNOWLEDGE_KEYWORDS:
                keywords = KNOWLEDGE_KEYWORDS[category]
                for keyword in keywords:
                    if keyword in q_lower:
                        knowledge = HALO_TRAINING_KNOWLEDGE.get(user_lang, HALO_TRAINING_KNOWLEDGE['ru'])
                        for key in knowledge:
                            if category in key:
                                relevant.append(knowledge[key])
                                matched_categories.add(category)
                                logger.info(f"Matched allowed category for non-member: {category}")
                                break
                if category in matched_categories:
                    break
        
        if relevant:
            return relevant
        
        # –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —Ä–∞–±–æ—á–∏–π, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ –≥—Ä—É–ø–ø–∞—Ö - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
        work_categories = [
            'hunting', 'multibeam', 'profile', 'posts', 'how_to_post',
            'live_stream', 'live_stream_start', 'live_stream_posture',
            'premium_stream', 'premium_stream_start', 'rules',
            'dislikes', 'dislikes_delete', 'auto_messages', 'tasks',
            'translator', 'contract', 'social_media'
        ]
        
        for category in work_categories:
            if category in KNOWLEDGE_KEYWORDS:
                keywords = KNOWLEDGE_KEYWORDS[category]
                if any(keyword in q_lower for keyword in keywords):
                    logger.warning(f"Work question from non-member blocked: {category}")
                    return []
        
        return []
    
    # –î–ª—è —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø - –æ–±—ã—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
    
    # –ü–†–ò–û–†–ò–¢–ï–¢ 1: –°–∞–º—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    specific_checks = [
        ('how_to_post', KNOWLEDGE_KEYWORDS['how_to_post']),
        ('premium_stream_start', KNOWLEDGE_KEYWORDS['premium_stream_start']),
        ('premium_stream', KNOWLEDGE_KEYWORDS['premium_stream']),
        ('live_stream_start', KNOWLEDGE_KEYWORDS['live_stream_start']),
        ('live_stream_posture', KNOWLEDGE_KEYWORDS['live_stream_posture']),
        ('dislikes_delete', KNOWLEDGE_KEYWORDS['dislikes_delete']),
        ('after_registration', KNOWLEDGE_KEYWORDS['after_registration']),
        ('earnings', KNOWLEDGE_KEYWORDS['earnings']),
    ]
    
    for category, keywords in specific_checks:
        for keyword in keywords:
            if keyword in q_lower:
                knowledge = HALO_TRAINING_KNOWLEDGE.get(user_lang, HALO_TRAINING_KNOWLEDGE['ru'])
                if category in knowledge:
                    relevant.append(knowledge[category])
                    matched_categories.add(category)
                    logger.info(f"Matched specific category: {category} for keyword: {keyword}")
                break
        if category in matched_categories:
            break
    
    if relevant:
        return relevant
    
    # –ü–†–ò–û–†–ò–¢–ï–¢ 2: –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    for category, keywords in KNOWLEDGE_KEYWORDS.items():
        if category in matched_categories:
            continue
        
        for keyword in keywords:
            if keyword in q_lower:
                knowledge = HALO_TRAINING_KNOWLEDGE.get(user_lang, HALO_TRAINING_KNOWLEDGE['ru'])
                for key, value in knowledge.items():
                    if category in key or keyword in key:
                        relevant.append(value)
                        logger.info(f"Matched general category: {category} for keyword: {keyword}")
                break
    
    return relevant


def find_relevant_materials(question, materials, max_results=3):
    """–ù–∞—Ö–æ–¥–∏—Ç –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –≤–æ–ø—Ä–æ—Å—É"""
    if not materials:
        return []
    
    question_lower = question.lower()
    scored_materials = []
    
    for material in materials:
        content = material.get('text') or material.get('transcription', '')
        if not content:
            continue
        
        content_lower = content.lower()
        score = 0
        
        question_words = [w for w in question_lower.split() if len(w) > 3]
        
        for word in question_words:
            if word in content_lower:
                score += content_lower.count(word) * 2
        
        for category, keywords in KNOWLEDGE_KEYWORDS.items():
            for keyword in keywords:
                if keyword in question_lower and keyword in content_lower:
                    score += 10
        
        if score > 0:
            scored_materials.append((score, material, content))
    
    scored_materials.sort(key=lambda x: x[0], reverse=True)
    
    return [(m, c) for _, m, c in scored_materials[:max_results]]


COUNTRY_KEYWORDS = [
    '–∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω', 'azerbaijan',
    '–∫–∞–∑–∞—Ö—Å—Ç–∞–Ω', 'kazakhstan',
    '–≥—Ä—É–∑–∏—è', 'georgia',
    '–±–µ–ª–∞—Ä—É—Å—å', 'belarus',
    '–º–æ–ª–¥–æ–≤–∞', 'moldova',
    '–∞—Ä–º–µ–Ω–∏—è', 'armenia',
    '—É–∑–±–µ–∫–∏—Å—Ç–∞–Ω', 'uzbekistan',
    '—Ç—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω', 'turkmenistan',
    '—Ç–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω', 'tajikistan',
    '–∫—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω', 'kyrgyzstan',
    '–ª–∞—Ç–≤–∏—è', '–ª–∞—Ç–≤–∞', 'latvia',
    '–ª–∏—Ç–≤–∞', 'lithuania',
    '—ç—Å—Ç–æ–Ω–∏—è', 'estonia',
    '–ø–æ–ª—å—à–∞', 'poland',
    '–≥–µ—Ä–º–∞–Ω–∏—è', 'germany',
    '—Ñ—Ä–∞–Ω—Ü–∏—è', 'france',
    '–∏—Ç–∞–ª–∏—è', 'italy',
    '–∏—Å–ø–∞–Ω–∏—è', 'spain',
    '—Ç—É—Ä—Ü–∏—è', 'turkey',
    '–∏–∑—Ä–∞–∏–ª—å', 'israel',
    '—Ñ–∏–Ω–ª—è–Ω–¥–∏—è', 'finland',
    '—à–≤–µ—Ü–∏—è', 'sweden',
    '–Ω–æ—Ä–≤–µ–≥–∏—è', 'norway',
    '–¥–∞–Ω–∏—è', 'denmark',
    '—à–≤–µ–π—Ü–∞—Ä–∏—è', 'switzerland',
    '–∞–≤—Å—Ç—Ä–∏—è', 'austria',
    '–±–µ–ª—å–≥–∏—è', 'belgium',
    '–Ω–∏–¥–µ—Ä–ª–∞–Ω–¥—ã', 'netherlands',
    '–≥—Ä–µ—Ü–∏—è', 'greece',
    '—á–µ—Ö–∏—è', 'czech',
    '–≤–µ–Ω–≥—Ä–∏—è', 'hungary',
    '—Ä—É–º—ã–Ω–∏—è', 'romania',
    '–±–æ–ª–≥–∞—Ä–∏—è', 'bulgaria',
    '—Å–µ—Ä–±–∏—è', 'serbia',
    '—Ö–æ—Ä–≤–∞—Ç–∏—è', 'croatia',
    '—Å–ª–æ–≤–∞–∫–∏—è', 'slovakia',
    '—Å–ª–æ–≤–µ–Ω–∏—è', 'slovenia',
    '—ç–∞—ç', '–æ–∞–µ', 'uae',
    '—Å—à–∞', 'usa',
    '–∫–∞–Ω–∞–¥–∞', 'canada',
    '–∞–≤—Å—Ç—Ä–∞–ª–∏—è', 'australia',
    '—è–ø–æ–Ω–∏—è', 'japan',
    '–∫–∏—Ç–∞–π', 'china',
    '–∏–Ω–¥–∏—è', 'india',
    '–±—Ä–∞–∑–∏–ª–∏—è', 'brazil',
    '–º–µ–∫—Å–∏–∫–∞', 'mexico',
    '–∞—Ä–≥–µ–Ω—Ç–∏–Ω–∞', 'argentina',
    '—é–∂–Ω–∞—è –∫–æ—Ä–µ—è', 'south korea',
    '–∏—Ä–∞–Ω', 'iran',
    '–∏—Ä–∞–∫', 'iraq',
    '—Å–∞—É–¥–æ–≤—Å–∫–∞—è', 'saudi',
    '–∫—É–≤–µ–π—Ç', 'kuwait',
    '–∫–∞—Ç–∞—Ä', 'qatar',
    '–±–∞—Ö—Ä–µ–π–Ω', 'bahrain',
    '–æ–º–∞–Ω', 'oman',
    '—É–∫—Ä–∞—ó–Ω–∞', '—É–∫—Ä–∞—ó–Ω–∞', 'ukraine',
    '—Ä–æ—Å—Å–∏—è', 'russia',
]

def detect_country_in_text(text):
    text_lower = text.lower()
    for country in COUNTRY_KEYWORDS:
        if country in text_lower:
            return country
    return None

def is_g4f_error(content):
    if not content:
        return True
    c = content.lower()
    if 'does not exist' in c:
        return True
    if 'the model does not' in c:
        return True
    if 'model' in c and 'exist' in c:
        return True
    if c.startswith('error'):
        return True
    if 'api.airforce' in c:
        return True
    if 'bad request' in c:
        return True
    if len(content.strip()) < 3:
        return True
    return False

async def check_forbidden_topics(message):
    msg_lower = message.lower()
    topics = await get_forbidden_topics_from_db()
    
    for topic in topics:
        keywords = json.loads(topic['keywords'])
        for keyword in keywords:
            if keyword.lower() in msg_lower:
                return True
    return False

async def build_context_prompt(user_id, question, is_in_groups=False):
    from database.analysis import get_all_analysis_texts, get_all_analysis_audios, get_all_analysis_videos
    
    user = await get_user(user_id)
    history = await get_messages(user_id, limit=15)
    
    user_lang = user['language'] if user and user['language'] else 'ru'
    
    relevant_knowledge = find_relevant_knowledge(question, user_lang, is_in_groups)
    
    status = user['status']
    if status in ['new', 'chatting', 'waiting_photos', 'asking_work_hours', 'asking_experience']:
        category = 'new'
    elif status in ['helping_registration', 'waiting_screenshot']:
        category = 'registration'
    elif status in ['registered', 'approved']:
        category = 'working'
    else:
        category = 'new'
    
    faq_ru = await get_faq(category=category)
    faq_all = await get_faq()
    learning = await get_ai_learning()
    
    history_text = "\n".join([f"{msg['role']}: {msg['content']}" for msg in history])
    
    faq_text = "\n".join([f"Q: {f['question']}\nA: {f['answer']}" for f in faq_ru[:30]])
    faq_text += "\n\n=== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ü–†–û–°–´ (–í–°–ï –Ø–ó–´–ö–ò) ===\n"
    faq_text += "\n".join([f"Q: {f['question']}\nA: {f['answer']}" for f in faq_all[:50]])
    
    learning_text = "\n".join([f"Q: {l['question']}\nA: {l['answer']} (confidence: {l['confidence']})" for l in learning[:10]])
    
    if is_in_groups:
        group_status = "‚úÖ –ï–°–¢–¨ –í –ì–†–£–ü–ü–ê–• - –º–æ–∂–µ—à—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –í–°–ï —Ä–∞–±–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã"
    else:
        group_status = "‚ùå –ù–ï–¢ –í –ì–†–£–ü–ü–ê–• - –æ—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –∏ –ó–ê–†–ê–ë–û–¢–ö–ï"
    
    last_messages = history[-5:] if len(history) >= 5 else history
    recent_context = "\n".join([f"{msg['role']}: {msg['content']}" for msg in last_messages])
    
    knowledge_section = ""
    if relevant_knowledge:
        knowledge_section = f"\n\n=== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ó–ù–ê–ù–ò–Ø –ü–û –í–û–ü–†–û–°–£ ===\n"
        knowledge_section += "\n\n".join(relevant_knowledge[:5])
        knowledge_section += "\n‚ö†Ô∏è –ò–°–ü–û–õ–¨–ó–£–ô –≠–¢–ò –ó–ù–ê–ù–ò–Ø –î–õ–Ø –û–¢–í–ï–¢–ê!\n"
    
    training_materials = ""
    
    if is_in_groups:
        texts_all = await get_all_analysis_texts(lang=user_lang)
        audios_all = await get_all_analysis_audios(lang=user_lang)
        videos_all = await get_all_analysis_videos(lang=user_lang)
        
        relevant_texts = find_relevant_materials(question, texts_all, max_results=5)
        relevant_audios = find_relevant_materials(question, audios_all, max_results=3)
        relevant_videos = find_relevant_materials(question, videos_all, max_results=3)
        
        if relevant_texts or relevant_audios or relevant_videos:
            training_materials = f"\n\n=== –†–ï–õ–ï–í–ê–ù–¢–ù–´–ï –û–ë–£–ß–ê–Æ–©–ò–ï –ú–ê–¢–ï–†–ò–ê–õ–´ (–¥–æ—Å—Ç—É–ø–Ω—ã —Ç.–∫. –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –í –ì–†–£–ü–ü–ê–•) ===\n"
            training_materials += "‚ö†Ô∏è –≠–¢–ò –ú–ê–¢–ï–†–ò–ê–õ–´ –°–ü–ï–¶–ò–ê–õ–¨–ù–û –û–¢–û–ë–†–ê–ù–´ –ü–û –¢–í–û–ï–ú–£ –í–û–ü–†–û–°–£ - –ò–°–ü–û–õ–¨–ó–£–ô –ò–•!\n\n"
            
            if relevant_texts:
                training_materials += "=== –†–ï–õ–ï–í–ê–ù–¢–ù–´–ï –¢–ï–ö–°–¢–û–í–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò ===\n"
                for i, (text, content) in enumerate(relevant_texts, 1):
                    training_materials += f"\n--- –î–æ–∫—É–º–µ–Ω—Ç {i} (–†–ï–õ–ï–í–ê–ù–¢–ù–´–ô) ---\n{content[:2000]}\n"
            
            if relevant_audios:
                training_materials += "\n=== –†–ï–õ–ï–í–ê–ù–¢–ù–´–ï –ê–£–î–ò–û –ú–ê–¢–ï–†–ò–ê–õ–´ ===\n"
                for i, (audio, content) in enumerate(relevant_audios, 1):
                    training_materials += f"\n--- –ê—É–¥–∏–æ {i} (–†–ï–õ–ï–í–ê–ù–¢–ù–´–ô) ---\n{content[:1500]}\n"
            
            if relevant_videos:
                training_materials += "\n=== –†–ï–õ–ï–í–ê–ù–¢–ù–´–ï –í–ò–î–ï–û –ú–ê–¢–ï–†–ò–ê–õ–´ ===\n"
                for i, (video, content) in enumerate(relevant_videos, 1):
                    training_materials += f"\n--- –í–∏–¥–µ–æ {i} (–†–ï–õ–ï–í–ê–ù–¢–ù–´–ô) ---\n{content[:1500]}\n"
    
    lang_names = {'ru': '–†–£–°–°–ö–û–ú', 'uk': '–£–ö–†–ê–á–ù–°–¨–ö–û–Æ', 'en': 'ENGLISH'}
    lang_name = lang_names.get(user_lang, '–†–£–°–°–ö–û–ú')
    
    lang_reminders = {
        'ru': '‚ö†Ô∏è –Ø–ó–´–ö –û–¢–í–ï–¢–ê: –¢–û–õ–¨–ö–û –†–£–°–°–ö–ò–ô! –ù–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤!',
        'uk': '‚ö†Ô∏è –ú–û–í–ê –í–Ü–î–ü–û–í–Ü–î–Ü: –¢–Ü–õ–¨–ö–ò –£–ö–†–ê–á–ù–°–¨–ö–ê! –ñ–æ–¥–Ω–∏—Ö —ñ–Ω—à–∏—Ö –º–æ–≤!',
        'en': '‚ö†Ô∏è RESPONSE LANGUAGE: ONLY ENGLISH! No other languages!'
    }
    lang_reminder = lang_reminders.get(user_lang, lang_reminders['ru'])
    
    not_in_groups_warning = ""
    if not is_in_groups:
        not_in_groups_warning = f"""
üî¥üî¥üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û üî¥üî¥üî¥
–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ù–ï –í –ì–†–£–ü–ü–ê–•!
–¢–´ –ú–û–ñ–ï–®–¨ –û–¢–í–ï–ß–ê–¢–¨ –¢–û–õ–¨–ö–û –ù–ê –í–û–ü–†–û–°–´ –û:
‚úÖ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
‚úÖ –ó–ê–†–ê–ë–û–¢–ö–ï (—Å–∫–æ–ª—å–∫–æ –ø–ª–∞—Ç—è—Ç, –∫–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç)

–ù–ï –û–¢–í–ï–ß–ê–ô –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ:
‚ùå —ç—Ñ–∏—Ä—ã, —Å—Ç—Ä–∏–º—ã, —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ (–ø—Ä–µ–º–∏—É–º –∏–ª–∏ –æ–±—ã—á–Ω—ã–µ)
‚ùå –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å
‚ùå –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã
‚ùå –¥–∏–∑–ª–∞–π–∫–∏, –æ—Ö–æ—Ç—É, –º—É–ª—å—Ç–∏–±–∏–º—ã
‚ùå –ø–æ—Å—Ç—ã, –ø—Ä–æ—Ñ–∏–ª—å (–∫—Ä–æ–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
‚ùå –∞–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è, –∑–∞–¥–∞–Ω–∏—è

–ï—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –æ —Ä–∞–±–æ—Ç–µ - —Å–∫–∞–∂–∏:
"{get_not_in_groups_message(user_lang)}"

–≠–°–ö–ê–õ–ò–†–£–ô (escalate: true) –Ω–∞ –ª—é–±—ã–µ —Ä–∞–±–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã!
üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥
"""
    
    context_prompt = f"""
–°–¢–ê–¢–£–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: {user['status']}
–°–¢–ê–¢–£–° –£–ß–ê–°–¢–ò–Ø: {group_status}
{not_in_groups_warning}

üî¥üî¥üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û üî¥üî¥üî¥
–Ø–ó–´–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: {lang_name}
{lang_reminder}
–¢–´ –û–ë–Ø–ó–ê–ù –û–¢–í–ï–ß–ê–¢–¨ –¢–û–õ–¨–ö–û –ù–ê –Ø–ó–´–ö–ï {lang_name}!
–ï–°–õ–ò –û–¢–í–ï–¢–ò–®–¨ –ù–ê –î–†–£–ì–û–ú –Ø–ó–´–ö–ï - –≠–¢–û –û–®–ò–ë–ö–ê!
üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥üî¥

–ö–ê–ö –ò–°–ö–ê–¢–¨ –û–¢–í–ï–¢:

1. –°–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏ –ü–û–°–õ–ï–î–ù–ò–ï 5 –°–û–û–ë–©–ï–ù–ò–ô - –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç —Ç–∞–º, –∏—Å–ø–æ–ª—å–∑—É–π —Å confidence 90-95:
{recent_context}

2. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö, —Å–º–æ—Ç—Ä–∏ –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ó–ù–ê–ù–ò–Ø:
{knowledge_section}

3. –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∑–Ω–∞–Ω–∏—è—Ö, —Å–º–æ—Ç—Ä–∏ FAQ –ò –ü–†–ê–í–ò–õ–ê:
{faq_text}

4. –ï—Å–ª–∏ –Ω–µ—Ç –≤ FAQ, —Å–º–æ—Ç—Ä–∏ –û–ë–£–ß–ê–Æ–©–ò–ï –ú–ê–¢–ï–†–ò–ê–õ–´ (–¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –í –ì–†–£–ü–ü–ê–•):
{training_materials}

5. –ï—Å–ª–∏ –Ω–∏–≥–¥–µ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ - —ç—Å–∫–∞–ª–∏—Ä—É–π (escalate: true, confidence < 70)

–ü–û–õ–ù–ê–Ø –ò–°–¢–û–†–ò–Ø –î–ò–ê–õ–û–ì–ê:
{history_text}

–û–ë–£–ß–ï–ù–ù–´–ï –û–¢–í–ï–¢–´:
{learning_text}

–¢–ï–ö–£–©–ò–ô –í–û–ü–†–û–°:
{question}

–ü–†–ê–í–ò–õ–ê –û–¢–í–ï–¢–ê:
- üî¥ –°–ê–ú–û–ï –í–ê–ñ–ù–û–ï: –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ —è–∑—ã–∫–µ {lang_name}!
- üî¥ –ù–ï –°–ú–ï–®–ò–í–ê–ô —è–∑—ã–∫–∏! –í–µ—Å—å –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ {lang_name}!
- üî¥ –î–∞–∂–µ –µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ - –æ—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ {lang_name}!
- üî¥ –ù–ï –ü–û–í–¢–û–†–Ø–ô –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ—Ç–≤–µ—Ç –Ω–∞ —Ä–∞–∑–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã!
- üî¥ –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —É—Ç–æ—á–Ω—è—é—â–∏–π - –¥–∞–π –£–¢–û–ß–ù–Ø–Æ–©–ò–ô –æ—Ç–≤–µ—Ç, –ù–ï –∫–æ–ø–∏—Ä—É–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π!
- –ü—Ä–æ—Å—Ç—ã–µ —ç–º–æ—Ü–∏–∏ (–æ–∫, —Å—É–ø–µ—Ä, –∫–ª–∞—Å—Å, –¥–æ–±—Ä–µ) - confidence 95+, –ë–ï–ó —ç—Å–∫–∞–ª–∞—Ü–∏–∏
- –õ–Æ–ë–ê–Ø –°–¢–†–ê–ù–ê –ü–û–î–•–û–î–ò–¢ –¥–ª—è —Ä–∞–±–æ—Ç—ã
- –û—Ç–≤–µ—Ç –ö–†–ê–¢–ö–ò–ô (–¥–æ 200 —Å–ª–æ–≤)
- –ë–ï–ó markdown (–±–µ–∑ *, _, **)
- –°—Ç–∏–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ Valencia (–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —ç–º–æ–¥–∑–∏)
- –ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞–π–¥–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–æ –ü–ï–†–ï–§–û–†–ú–£–õ–ò–†–£–ô —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ù–µ –∫–æ–ø–∏—Ä—É–π —Ç–µ–∫—Å—Ç –æ–¥–∏–Ω –≤ –æ–¥–∏–Ω - –æ–±—ä—è—Å–Ω–∏ –ø–æ–Ω—è—Ç–Ω–æ –∏ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê JSON:
{{
  "answer": "—Ç–≤–æ–π –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –æ—Ç–≤–µ—Ç –ù–ê –Ø–ó–´–ö–ï {lang_name}",
  "confidence": 0-100,
  "escalate": true/false
}}

üî¥ –ü–û–°–õ–ï–î–ù–ï–ï –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ï: –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ü–û–õ–ù–û–°–¢–¨–Æ –Ω–∞ —è–∑—ã–∫–µ {lang_name}!
"""
    
    return context_prompt

def get_not_in_groups_message(user_lang='ru'):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –≤ –≥—Ä—É–ø–ø–∞—Ö –Ω–∞ –∏—Ö —è–∑—ã–∫–µ"""
    messages = {
        'ru': '–¢—ã –ø–æ–∫–∞ —á—Ç–æ –Ω–µ –ø—Ä–æ—à–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–Ω—á–∏—à—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ —Ç–µ–±—è –¥–æ–±–∞–≤—è—Ç –≤ –≥—Ä—É–ø–ø—ã, —É —Ç–µ–±—è –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±—É—á–µ–Ω–∏—é –∏ —è —Å–º–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä–∞–±–æ—Ç–µ! üòä',
        'uk': '–¢–∏ –ø–æ–∫–∏ —â–æ –Ω–µ –ø—Ä–æ–π—à–ª–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é. –Ø–∫ —Ç—ñ–ª—å–∫–∏ –∑–∞–∫—ñ–Ω—á–∏—à —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é —ñ —Ç–µ–±–µ –¥–æ–¥–∞–¥—É—Ç—å —É –≥—Ä—É–ø–∏, —É —Ç–µ–±–µ –±—É–¥–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –Ω–∞–≤—á–∞–Ω–Ω—è —ñ —è –∑–º–æ–∂—É –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –≤—Å—ñ —Ç–≤–æ—ó –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ —Ä–æ–±–æ—Ç—É! üòä',
        'en': "You haven't completed registration yet. Once you finish registration and get added to the groups, you'll have access to training and I'll be able to answer all your work questions! üòä"
    }
    return messages.get(user_lang, messages['ru'])

async def check_faq_direct_match(question, user_lang='ru'):
    q_lower = question.lower().strip()
    
    # ===== –ù–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ü—Ä—è–º—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã =====
    
    # 1. –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –≠–§–ò–†
    launch_stream_keywords = {
        'ru': ['–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ñ–∏—Ä', '–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é', '–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∏–º', '–Ω–∞—á–∞—Ç—å —ç—Ñ–∏—Ä'],
        'uk': ['—è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –µ—Ñ—ñ—Ä', '—è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é', '–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å—Ç—Ä—ñ–º', '–ø–æ—á–∞—Ç–∏ –µ—Ñ—ñ—Ä'],
        'en': ['how to start stream', 'how to launch stream', 'start streaming', 'begin stream']
    }
    
    for lang, keywords in launch_stream_keywords.items():
        if any(kw in q_lower for kw in keywords):
            return HALO_TRAINING_KNOWLEDGE.get(user_lang, HALO_TRAINING_KNOWLEDGE['ru']).get('live_stream_start')
    
    # 2. –ó–ê–†–ê–ë–û–¢–ö–ò
    earnings_keywords = {
        'ru': ['—Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç', '—Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å', '–∫–∞–∫–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫'],
        'uk': ['—Å–∫—ñ–ª—å–∫–∏ –∑–∞—Ä–æ–±–ª—è—é—Ç—å', '—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂–Ω–∞ –∑–∞—Ä–æ–±–∏—Ç–∏', '—è–∫–∏–π –∑–∞—Ä–æ–±—ñ—Ç–æ–∫'],
        'en': ['how much earn', 'how much can i earn', 'what are earnings']
    }
    
    for lang, keywords in earnings_keywords.items():
        if any(kw in q_lower for kw in keywords):
            return HALO_TRAINING_KNOWLEDGE.get(user_lang, HALO_TRAINING_KNOWLEDGE['ru']).get('earnings_info')
    
    # ===== –°–¢–ê–†–´–ï –ü–†–û–í–ï–†–ö–ò =====
    
    relevant_knowledge = find_relevant_knowledge(question, user_lang, is_in_groups=True)
    if relevant_knowledge and len(q_lower.split()) <= 15:
        return relevant_knowledge[0]
    
    agency_keywords = [
        'which agency', 'what agency', 'agency name', 'which one',
        '—è–∫–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', '–∫–∞–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', '–Ω–∞–∑–≤–∞ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞', '–Ω–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞',
        '—è–∫–µ –æ–±—Ä–∞—Ç–∏', '–∫–∞–∫–æ–µ –≤—ã–±—Ä–∞—Ç—å', 'which to choose', 'which should i choose',
        'tosagency', '–∞–≥–µ–Ω—Ç—Å—Ç–≤', 'agency', '–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', '–∞–≥–µ–Ω—Å—Ç–≤–æ',
        '—è–∫–µ', '–∫–∞–∫–æ–µ', 'which', 'what is agency', 'what agency name'
    ]
    
    is_agency_question = False
    for kw in agency_keywords:
        if kw in q_lower:
            is_agency_question = True
            break
    
    if not is_agency_question:
        agency_words_count = sum(1 for word in ['agency', '–∞–≥–µ–Ω—Ç—Å—Ç–≤', '–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ', '–∞–≥–µ–Ω—Å—Ç–≤–æ', '—è–∫–µ', '–∫–∞–∫–æ–µ', 'which'] if word in q_lower)
        if agency_words_count > 0 and len(q_lower.split()) <= 4:
            is_agency_question = True
    
    if is_agency_question:
        responses = {
            'ru': '–í —Ä–∞–∑–¥–µ–ª–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –≤—ã–±–∏—Ä–∞–π: Tosagency-Ukraine üòä',
            'uk': '–£ —Ä–æ–∑–¥—ñ–ª—ñ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –æ–±–∏—Ä–∞–π: Tosagency-Ukraine üòä',
            'en': 'In the Agency section choose: Tosagency-Ukraine üòä'
        }
        return responses.get(user_lang, responses['ru'])
    
    video_photo_keywords = [
        'can i send video', 'video instead', '–≤—ñ–¥–µ–æ –∑–∞–º—ñ—Å—Ç—å', '–≤–∏–¥–µ–æ –≤–º–µ—Å—Ç–æ',
        '–º–æ–∂—É –≤—ñ–¥–µ–æ', '–º–æ–≥—É –≤–∏–¥–µ–æ', '–≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—ñ–¥–µ–æ', '–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ'
    ]
    
    if any(kw in q_lower for kw in video_photo_keywords):
        responses = {
            'ru': '–ù—É–∂–Ω—ã –∏–º–µ–Ω–Ω–æ —Ñ–æ—Ç–æ, –Ω–µ –≤–∏–¥–µ–æ üì∏ –ü—Ä–∏—à–ª–∏ 2-3 —Ñ–æ—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, —á—Ç–æ–±—ã –±—ã–ª–æ —á—ë—Ç–∫–æ –≤–∏–¥–Ω–æ –ª–∏—Ü–æ üòä',
            'uk': '–ü–æ—Ç—Ä—ñ–±–Ω—ñ —Å–∞–º–µ —Ñ–æ—Ç–æ, –Ω–µ –≤—ñ–¥–µ–æ üì∏ –ù–∞–¥—ñ—à–ª–∏ 2-3 —Ñ–æ—Ç–æ —Ö–æ—Ä–æ—à–æ—ó —è–∫–æ—Å—Ç—ñ, —â–æ–± –±—É–ª–æ —á—ñ—Ç–∫–æ –≤–∏–¥–Ω–æ –æ–±–ª–∏—á—á—è üòä',
            'en': 'We need photos, not videos üì∏ Send 2-3 good quality photos with your face clearly visible üòä'
        }
        return responses.get(user_lang, responses['ru'])
    
    country = detect_country_in_text(q_lower)
    if country:
        country_display = country.capitalize()
        responses = {
            'ru': f"–£ –Ω–∞—Å —Ä–∞–±–æ—Ç–∞—é—Ç –¥–µ–≤–æ—á–∫–∏ —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω! {country_display} –ø–æ–¥—Ö–æ–¥–∏—Ç ‚úÖ –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –ª—é–±—É—é —Å—Ç—Ä–∞–Ω—É üòä",
            'uk': f"–£ –Ω–∞—Å –ø—Ä–∞—Ü—é—é—Ç—å –¥—ñ–≤—á–∞—Ç–∞ –∑ —É—Å—ñ—Ö –∫—Ä–∞—ó–Ω! {country_display} –ø—ñ–¥—Ö–æ–¥–∏—Ç—å ‚úÖ –ü—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –º–æ–∂–µ—à—å –≤–∏–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∫—Ä–∞—ó–Ω—É üòä",
            'en': f"We have girls working from all countries! {country_display} works perfectly ‚úÖ During registration you can choose any country üòä"
        }
        return responses.get(user_lang, responses['ru'])
    
    detailed_info = {
        'ru': """–ü—Ä–∏–≤–µ—Ç–∏–∫ üòä

üåü –†–ê–ë–û–¢–ê –°–¢–†–ò–ú-–ú–û–î–ï–õ–¨–Æ –í –ü–†–ò–õ–û–ñ–ï–ù–ò–ò HALO üåü

üí¨ –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ –æ–±—â–µ–Ω–∏–∏, –ø—Ä—è–º—ã—Ö —ç—Ñ–∏—Ä–∞—Ö –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞—Ö —Å –º—É–∂—á–∏–Ω–∞–º–∏
üìû 1 –º–∏–Ω—É—Ç–∞ –æ–±—â–µ–Ω–∏—è = 1$
üí≥ –ö–æ–º–∏—Å—Å–∏—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ ‚Äî 20%
üëâ –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥: 0.8$ –∑–∞ –º–∏–Ω—É—Ç—É

üí∞ –ü—Ä–∏–º–µ—Ä—ã –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –≤ –∑–≤–æ–Ω–∫–∞—Ö:
‚Äî 5 –º–∏–Ω—É—Ç –æ–±—â–µ–Ω–∏—è = 5$ ‚Üí 4$ —á–∏—Å—Ç—ã–º–∏
‚Äî 10 –º–∏–Ω—É—Ç = 10$ ‚Üí 8$ —á–∏—Å—Ç—ã–º–∏
‚Äî 30 –º–∏–Ω—É—Ç = 30$ ‚Üí 24$ —á–∏—Å—Ç—ã–º–∏
‚Äî 1 —á–∞—Å –∑–≤–æ–Ω–∫–æ–≤ = 60$ ‚Üí 48$ —á–∏—Å—Ç—ã–º–∏

üíµ –û—Ç 50$ –≤ –¥–µ–Ω—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ

üåç –ê—É–¥–∏—Ç–æ—Ä–∏—è: –°–®–ê, –ï–≤—Ä–æ–ø–∞, –ê–Ω–≥–ª–∏—è, –û–ê–≠, –∞—Ä–∞–±—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω—ã
üë®‚Äçüíº –ú–Ω–æ–≥–∏–µ –º—É–∂—á–∏–Ω—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–º–µ–Ω–Ω–æ –∑–∞ –æ–±—â–µ–Ω–∏–µ–º, –∞ –Ω–µ –∑–∞ üîû
üåê –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ ‚Äî –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
üïí –°–≤–æ–±–æ–¥–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—à—å, –∫–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ

üé§ –í –æ—Ç–∫—Ä—ã—Ç—ã—Ö —ç—Ñ–∏—Ä–∞—Ö ‚Äî —Ç–æ–ª—å–∫–æ –∫—É–ª—å—Ç—É—Ä–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
–ú–æ–∂–Ω–æ —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å, –ø–µ—Ç—å, –æ–±—â–∞—Ç—å—Å—è, —Å–ª—É—à–∞—Ç—å –º—É–∑—ã–∫—É
üíé –í–∞–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å –æ–ø—Ä—è—Ç–Ω–æ –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ
‚ùå –ù–∏–∫–∞–∫–æ–π —ç—Ä–æ—Ç–∏–∫–∏ –∏ –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ–π –æ–¥–µ–∂–¥—ã ‚Äî –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –±–∞–Ω

üìû –í –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∑–≤–æ–Ω–∫–∞—Ö —Ñ–æ—Ä–º–∞—Ç –æ–±—â–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º ‚Äî –ø–æ –≤–∑–∞–∏–º–Ω–æ–º—É —Å–æ–≥–ª–∞—Å–∏—é
‚Äî –ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è
‚Äî –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–¥–∞—Ä–∫–∏
‚Äî –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ –∑–≤–æ–Ω–∫–∞—Ö
‚Äî –í–∞—Å –Ω–∏–∫—Ç–æ –Ω–µ —Å–ª—ã—à–∏—Ç, –∫—Ä–æ–º–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

üì§ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤:
‚Äî –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
‚Äî –°—Ä–æ–∫: 1‚Äì3 –¥–Ω—è
‚Äî –ï—Å—Ç—å –≤–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ –Ω–∞ –∫–∞—Ä—Ç—É –∏–ª–∏ –∫—Ä–∏–ø—Ç—É
‚Äî –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –ø–æ–º–æ–≥–∞–µ–º —Å –≤—ã–≤–æ–¥–æ–º

üì∏ –ö–∞–∫ –Ω–∞—á–∞—Ç—å:
–ü—Ä–∏—à–ª–∏ 2‚Äì3 —Ñ–æ—Ç–æ
‚Äî —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
‚Äî —á—ë—Ç–∫–æ –≤–∏–¥–Ω–æ –ª–∏—Ü–æ
(—Ñ–æ—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è)

‚ö†Ô∏è –í–∞–∂–Ω–æ:
üîπ –ü–µ—Ä–≤—ã–µ 7 –¥–Ω–µ–π ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥
üîπ –ù—É–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100$
üîπ –£ –∫–∞–∂–¥–æ–π –¥–µ–≤—É—à–∫–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –ï—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç –±–ª–æ–∫–∏—Ä—É—é—Ç ‚Äî –Ω–æ–≤—ã–π —Å–æ–∑–¥–∞—Ç—å –Ω–µ–ª—å–∑—è, –ø–æ—ç—Ç–æ–º—É –≤—ã–¥–µ–ª—è–π—Ç–µ –º–∞–∫—Å–∏–º—É–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã
üöÄ –ù–æ–≤–µ–Ω—å–∫–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—é—Ç
‚ùå –¢–µ—Å—Ç –Ω–µ –ø—Ä–æ–π–¥–µ–Ω ‚Äî –∞–∫–∫–∞—É–Ω—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç ‚Äî –∂–¥—É —Ñ–æ—Ç–æ üëã""",
        'uk': """–ü—Ä–∏–≤—ñ—Ç–∏–∫ üòä

üåü –†–û–ë–û–¢–ê –°–¢–†–Ü–ú-–ú–û–î–ï–õ–õ–Æ –í –ó–ê–°–¢–û–°–£–ù–ö–£ HALO üåü

üí¨ –ó–∞—Ä–æ–±—ñ—Ç–æ–∫ –Ω–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—ñ, –ø—Ä—è–º–∏—Ö –µ—Ñ—ñ—Ä–∞—Ö —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –≤—ñ–¥–µ–æ–¥–∑–≤—ñ–Ω–∫–∞—Ö –∑ —á–æ–ª–æ–≤—ñ–∫–∞–º–∏
üìû 1 —Ö–≤–∏–ª–∏–Ω–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è = 1$
üí≥ –ö–æ–º—ñ—Å—ñ—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ ‚Äî 20%
üëâ –ß–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥: 0.8$ –∑–∞ —Ö–≤–∏–ª–∏–Ω—É

üí∞ –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞—Ä–æ–±—ñ—Ç–∫—É –≤ –¥–∑–≤—ñ–Ω–∫–∞—Ö:
‚Äî 5 —Ö–≤–∏–ª–∏–Ω —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è = 5$ ‚Üí 4$ —á–∏—Å—Ç–∏–º–∏
‚Äî 10 —Ö–≤–∏–ª–∏–Ω = 10$ ‚Üí 8$ —á–∏—Å—Ç–∏–º–∏
‚Äî 30 —Ö–≤–∏–ª–∏–Ω = 30$ ‚Üí 24$ —á–∏—Å—Ç–∏–º–∏
‚Äî 1 –≥–æ–¥–∏–Ω–∞ –¥–∑–≤—ñ–Ω–∫—ñ–≤ = 60$ ‚Üí 48$ —á–∏—Å—Ç–∏–º–∏

üíµ –í—ñ–¥ 50$ –Ω–∞ –¥–µ–Ω—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ

üåç –ê—É–¥–∏—Ç–æ—Ä—ñ—è: –°–®–ê, –Ñ–≤—Ä–æ–ø–∞, –ê–Ω–≥–ª—ñ—è, –û–ê–ï, –∞—Ä–∞–±—Å—å–∫—ñ –∫—Ä–∞—ó–Ω–∏
üë®‚Äçüíº –ë–∞–≥–∞—Ç–æ —á–æ–ª–æ–≤—ñ–∫—ñ–≤ –ø—Ä–∏—Ö–æ–¥—è—Ç—å —Å–∞–º–µ –∑–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è–º, –∞ –Ω–µ –∑–∞ üîû
üåê –í–±—É–¥–æ–≤–∞–Ω–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á ‚Äî –∞–Ω–≥–ª—ñ–π—Å—å–∫–∞ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–∞
üïí –í—ñ–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ ‚Äî –ø—Ä–∞—Ü—é—î—à, –∫–æ–ª–∏ –∑—Ä—É—á–Ω–æ

üé§ –£ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –µ—Ñ—ñ—Ä–∞—Ö ‚Äî —Ç—ñ–ª—å–∫–∏ –∫—É–ª—å—Ç—É—Ä–Ω–µ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è
–ú–æ–∂–Ω–∞ —Ç–∞–Ω—Ü—é–≤–∞—Ç–∏, —Å–ø—ñ–≤–∞—Ç–∏, —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è, —Å–ª—É—Ö–∞—Ç–∏ –º—É–∑–∏–∫—É
üíé –í–∞–∂–ª–∏–≤–æ –≤–∏–≥–ª—è–¥–∞—Ç–∏ –æ—Ö–∞–π–Ω–æ —ñ –ø—Ä–µ–∑–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ
‚ùå –ù—ñ—è–∫–æ—ó –µ—Ä–æ—Ç–∏–∫–∏ —Ç–∞ –≤—ñ–¥–≤–µ—Ä—Ç–æ–≥–æ –æ–¥—è–≥—É ‚Äî –∑–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è –±–∞–Ω

üìû –£ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –¥–∑–≤—ñ–Ω–∫–∞—Ö —Ñ–æ—Ä–º–∞—Ç —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –º–æ–∂–µ –±—É—Ç–∏ –±—É–¥—å-—è–∫–∏–º ‚Äî –∑–∞ –≤–∑–∞—î–º–Ω–æ—é –∑–≥–æ–¥–æ—é
‚Äî –ö–æ–∂–Ω–∞ —Ö–≤–∏–ª–∏–Ω–∞ –æ–ø–ª–∞—á—É—î—Ç—å—Å—è
‚Äî –ú–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ–¥–∞—Ä—É–Ω–∫–∏
‚Äî –ü–µ—Ä–µ–∫–ª–∞–¥–∞—á –ø—Ä–∞—Ü—é—î —ñ –≤ –¥–∑–≤—ñ–Ω–∫–∞—Ö
‚Äî –í–∞—Å –Ω—ñ—Ö—Ç–æ –Ω–µ —á—É—î, –∫—Ä—ñ–º —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞

üì§ –í–∏–≤–µ–¥–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤:
‚Äî –°–∞–º–æ—Å—Ç—ñ–π–Ω–æ
‚Äî –¢–µ—Ä–º—ñ–Ω: 1‚Äì3 –¥–Ω—ñ
‚Äî –Ñ –≤—ñ–¥–µ–æ-—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è, —è–∫ –≤–∏–≤–µ—Å—Ç–∏ –≥—Ä–æ—à—ñ –Ω–∞ –∫–∞—Ä—Ç—É –∞–±–æ –∫—Ä–∏–ø—Ç—É
‚Äî –Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å —Å–∫–ª–∞–¥–Ω–æ—â—ñ ‚Äî –¥–æ–ø–æ–º–∞–≥–∞—î–º–æ –∑ –≤–∏–≤–µ–¥–µ–Ω–Ω—è–º

üì∏ –Ø–∫ –ø–æ—á–∞—Ç–∏:
–ù–∞–¥—ñ—à–ª–∏ 2‚Äì3 —Ñ–æ—Ç–æ
‚Äî —Ö–æ—Ä–æ—à–∞ —è–∫—ñ—Å—Ç—å
‚Äî —á—ñ—Ç–∫–æ –≤–∏–¥–Ω–æ –æ–±–ª–∏—á—á—è
(—Ñ–æ—Ç–æ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è)

‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:
üîπ –ü–µ—Ä—à—ñ 7 –¥–Ω—ñ–≤ ‚Äî —Ç–µ—Å—Ç–æ–≤–∏–π –ø–µ—Ä—ñ–æ–¥
üîπ –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ä–æ–±–∏—Ç–∏ 100$
üîπ –£ –∫–æ–∂–Ω–æ—ó –¥—ñ–≤—á–∏–Ω–∏ —î —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç. –Ø–∫—â–æ –∞–∫–∞—É–Ω—Ç –±–ª–æ–∫—É—é—Ç—å ‚Äî –Ω–æ–≤–∏–π —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–µ –º–æ–∂–Ω–∞, —Ç–æ–º—É –≤–∏–¥—ñ–ª—è–π—Ç–µ –º–∞–∫—Å–∏–º—É–º —á–∞—Å—É –¥–ª—è —Ä–æ–±–æ—Ç–∏
üöÄ –ù–æ–≤–µ–Ω—å–∫–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ—Å—É–≤–∞—é—Ç—å
‚ùå –¢–µ—Å—Ç –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–æ ‚Äî –∞–∫–∞—É–Ω—Ç –±–ª–æ–∫—É—î—Ç—å—Å—è

–Ø–∫—â–æ —Ñ–æ—Ä–º–∞—Ç –ø—ñ–¥—Ö–æ–¥–∏—Ç—å ‚Äî —á–µ–∫–∞—é —Ñ–æ—Ç–æ üëã""",
        'en': """Hello üòä

üåü WORK AS A STREAM MODEL IN HALO APP üåü

üí¨ Earn from chatting, live streams and private video calls with men
üìû 1 minute of communication = 1$
üí≥ Agency commission ‚Äî 20%
üëâ Net income: 0.8$ per minute

üí∞ Examples of earnings in calls:
‚Äî 5 minutes of communication = 5$ ‚Üí 4$ net
‚Äî 10 minutes = 10$ ‚Üí 8$ net
‚Äî 30 minutes = 30$ ‚Üí 24$ net
‚Äî 1 hour of calls = 60$ ‚Üí 48$ net

üíµ From 50$ per day with active work

üåç Audience: USA, Europe, England, UAE, Arab countries
üë®‚Äçüíº Many men come for communication, not for üîû
üåê Built-in translator ‚Äî English is not required
üïí Free schedule ‚Äî work when convenient

üé§ In open streams ‚Äî only cultural communication
You can dance, sing, chat, listen to music
üíé Important to look neat and presentable
‚ùå No erotica and revealing clothing ‚Äî violation = ban

üìû In private calls the format can be anything ‚Äî by mutual consent
‚Äî Every minute is paid
‚Äî Can receive gifts
‚Äî Translator works in calls
‚Äî Nobody hears you except the interlocutor

üì§ Withdrawal of funds:
‚Äî Independently
‚Äî Period: 1‚Äì3 days
‚Äî There is a video instruction on how to withdraw money to card or crypto
‚Äî If there are difficulties ‚Äî we help with withdrawal

üì∏ How to start:
Send 2‚Äì3 photos
‚Äî good quality
‚Äî face clearly visible
(photos only for internal approval)

‚ö†Ô∏è Important:
üîπ First 7 days ‚Äî trial period
üîπ Need to earn 100$
üîπ Each girl has only one opportunity to create an account. If account is blocked ‚Äî cannot create new one, so dedicate maximum time to work
üöÄ Newbies are actively promoted
‚ùå Test not passed ‚Äî account is blocked

If the format suits ‚Äî waiting for photos üëã"""
    }
    
    simple_reactions = {
        '–æ–∫': ('–û—Ç–ª–∏—á–Ω–æ! üòä', '–ß—É–¥–æ–≤–æ! üòä', 'Great! üòä'),
        '–æ–∫–µ–π': ('–°—É–ø–µ—Ä! üëç', '–°—É–ø–µ—Ä! üëç', 'Perfect! üëç'),
        '—Ö–æ—Ä–æ—à–æ': ('–û—Ç–ª–∏—á–Ω–æ! üòä', '–ß—É–¥–æ–≤–æ! üòä', 'Excellent! üòä'),
        '–¥–æ–±—Ä–µ': ('–ß—É–¥–æ–≤–æ! üòä', '–ß—É–¥–æ–≤–æ! üòä', 'Great! üòä'),
        '–ø–æ–Ω—è—Ç–Ω–æ': ('–°—É–ø–µ—Ä! üòä', '–°—É–ø–µ—Ä! üòä', 'Great! üòä'),
        '–∑—Ä–æ–∑—É–º—ñ–ª–æ': ('–î–æ–±—Ä–µ! üòä', '–î–æ–±—Ä–µ! üòä', 'Good! üòä'),
        '–∫–ª–∞—Å—Å': ('–†–∞–¥–∞ –ø–æ–º–æ—á—å! üòä', '–†–∞–¥–∞ –¥–æ–ø–æ–º–æ–≥—Ç–∏! üòä', 'Happy to help! üòä'),
        '—Å—É–ø–µ—Ä': ('üëç', 'üëç', 'üëç'),
        '–∫—Ä—É—Ç–æ': ('üî•', 'üî•', 'üî•'),
        '–æ—Ç–ª–∏—á–Ω–æ': ('üí™', 'üí™', 'üí™'),
        '—è—Å–Ω–æ': ('üëå', 'üëå', 'üëå'),
        '—á—É–¥–æ–≤–æ': ('üòä', 'üòä', 'üòä'),
        'fine': ('–û—Ç–ª–∏—á–Ω–æ! üòä', '–ß—É–¥–æ–≤–æ! üòä', 'Great! üòä'),
        'okay': ('–°—É–ø–µ—Ä! üëç', '–°—É–ø–µ—Ä! üëç', 'Perfect! üëç'),
        'ok': ('–û—Ç–ª–∏—á–Ω–æ! üòä', '–ß—É–¥–æ–≤–æ! üòä', 'Great! üòä'),
        'good': ('–°—É–ø–µ—Ä! üòä', '–°—É–ø–µ—Ä! üòä', 'Nice! üòä'),
        'great': ('–û—Ç–ª–∏—á–Ω–æ! üî•', '–ß—É–¥–æ–≤–æ! üî•', 'Awesome! üî•'),
        'nice': ('üëç', 'üëç', 'üëç'),
        'cool': ('üòä', 'üòä', 'üòä')
    }
    
    for reaction, responses in simple_reactions.items():
        if q_lower == reaction:
            lang_index = {'ru': 0, 'uk': 1, 'en': 2}.get(user_lang, 0)
            return responses[lang_index]
    
    faq_direct = {
        '–ø—Ä–∏–≤–µ—Ç': ('–ü—Ä–∏–≤–µ—Ç! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? üòä', '–ü—Ä–∏–≤—ñ—Ç! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏? üòä', 'Hi! How can I help? üòä'),
        '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π': ('–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! –†–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã? üòä', '–í—ñ—Ç–∞—é! –†–∞–¥–∞ —Ç–µ–±–µ –±–∞—á–∏—Ç–∏! –Ñ –ø–∏—Ç–∞–Ω–Ω—è? üòä', 'Hello! Nice to see you! Any questions? üòä'),
        '–≤—ñ—Ç–∞—é': ('–í—ñ—Ç–∞—é! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏? üòä', '–í—ñ—Ç–∞—é! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏? üòä', 'Hi! How can I help? üòä'),
        '–ø—Ä–∏–≤—ñ—Ç': ('–ü—Ä–∏–≤—ñ—Ç! –Ñ –ø–∏—Ç–∞–Ω–Ω—è? üòä', '–ü—Ä–∏–≤—ñ—Ç! –Ñ –ø–∏—Ç–∞–Ω–Ω—è? üòä', 'Hi! Any questions? üòä'),
        '—è–∫ –¥–µ–ª–∞': ('–ß—É–¥–æ–≤–æ! –ê —É —Ç–µ–±—è —è–∫? üòä', '–ß—É–¥–æ–≤–æ! –ê —É —Ç–µ–±–µ —è–∫? üòä', 'Great! How are you? üòä'),
        '–∫–∞–∫ –¥–µ–ª–∞': ('–û—Ç–ª–∏—á–Ω–æ! –£ —Ç–µ–±—è –∫–∞–∫? üòä', '–ß—É–¥–æ–≤–æ! –ê —É —Ç–µ–±–µ —è–∫? üòä', 'Great! How are you? üòä'),
        '–∫—Ç–æ —Ç—ã': ('–Ø –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ Valencia, –ø–æ–º–æ–≥–∞—é –¥–µ–≤–æ—á–∫–∞–º –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤ Halo üòä', '–Ø –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ Valencia, –¥–æ–ø–æ–º–∞–≥–∞—é –¥—ñ–≤—á–∞—Ç–∞–º –ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –≤ Halo üòä', "I'm a Valencia agency manager, helping girls start working in Halo üòä"),
        '—Å–ø–∞—Å–∏–±–æ': ('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! üòä', '–ë—É–¥—å –ª–∞—Å–∫–∞! üòä', "You're welcome! üòä"),
        '–¥—è–∫—É—é': ('–ë—É–¥—å –ª–∞—Å–∫–∞! üòä', '–ë—É–¥—å –ª–∞—Å–∫–∞! üòä', "You're welcome! üòä"),
        'thanks': ('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! üòä', '–ë—É–¥—å –ª–∞—Å–∫–∞! üòä', "You're welcome! üòä"),
        'hi': ('Hi! How can I help? üòä', '–ü—Ä–∏–≤—ñ—Ç! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏? üòä', 'Hi! How can I help? üòä'),
        'hello': ('Hello! How can I help? üòä', '–ü—Ä–∏–≤—ñ—Ç! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏? üòä', 'Hello! How can I help? üòä')
    }
    
    for key, answers in faq_direct.items():
        if key in q_lower or q_lower in key:
            lang_index = {'ru': 0, 'uk': 1, 'en': 2}.get(user_lang, 0)
            return answers[lang_index]
    
    detailed_keywords = [
        '–ø–æ–¥—Ä–æ–±–Ω–µ–µ', '–±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏', '—Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ', 
        '–¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ', '–±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó', '—Ä–æ–∑–∫–∞–∂–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ', 
        'more details', 'more information', 'tell me more'
    ]
    
    if any(kw in q_lower for kw in detailed_keywords):
        return detailed_info.get(user_lang, detailed_info['ru'])
    
    waiting_keywords = [
        '–ø—Ä–æ—Å—Ç–æ –∂–¥–∞—Ç—å', '–º–Ω–µ –ø—Ä–æ—Å—Ç–æ –∂–¥–∞—Ç—å', '–º–Ω–µ –∂–¥–∞—Ç—å', '–ø—Ä–æ—Å—Ç–æ –∂–¥—É', '–∏ –≤—Å–µ', '—Ç–µ–ø–µ—Ä—å –∂–¥—É', 
        '–ø—Ä–æ—Å—Ç–æ —á–µ–∫–∞—Ç–∏', '–º–µ–Ω—ñ —á–µ–∫–∞—Ç–∏', '–ø—Ä–æ—Å—Ç–æ —á–µ–∫–∞—é', '—ñ –≤—Å–µ', '—Ç–µ–ø–µ—Ä —á–µ–∫–∞—é',
        'just wait', 'should i wait', 'wait now'
    ]
    
    if any(kw in q_lower for kw in waiting_keywords):
        responses = {
            'ru': '–î–∞, –ø—Ä–æ—Å—Ç–æ –∂–¥–∏ üòä –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –±—É–¥–Ω–∏–π –¥–µ–Ω—å. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç ‚Äî —Å–º–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å! üí™',
            'uk': '–¢–∞–∫, –ø—Ä–æ—Å—Ç–æ —á–µ–∫–∞–π üòä –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∑–∞–∑–≤–∏—á–∞–π –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–±–æ—á–æ–≥–æ –¥–Ω—è. –Ø–∫ —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç–∏–≤—É—é—Ç—å ‚Äî –∑–º–æ–∂–µ—à –ø–æ—á–∞—Ç–∏ –∑–∞—Ä–æ–±–ª—è—Ç–∏! üí™',
            'en': 'Yes, just wait üòä Activation usually happens the next business day. Once activated ‚Äî you can start earning! üí™'
        }
        return responses.get(user_lang, responses['ru'])
    
    return None

async def is_contextual_question(question, history):
    q_lower = question.lower().strip()
    
    # –†–ê–°–®–ò–†–ï–ù–ù–´–ô —Å–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ "—á—Ç–æ –¥–µ–ª–∞—Ç—å"
    what_to_do_variants = [
        # –†—É—Å—Å–∫–∏–π
        '—â–æ –º–µ–Ω—ñ —Ä–æ–±–∏—Ç–∏', '—á—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å', '—â–æ —Ä–æ–±–∏—Ç–∏', '—á—Ç–æ –¥–µ–ª–∞—Ç—å',
        '—â–æ –º–µ–Ω—ñ', '—á—Ç–æ –º–Ω–µ', '—â–æ –¥–∞–ª—ñ', '—á—Ç–æ –¥–∞–ª—å—à–µ', 
        '—â–æ —Ç–µ–ø–µ—Ä', '—á—Ç–æ —Ç–µ–ø–µ—Ä—å', '—â–æ –∑–∞—Ä–∞–∑', '—á—Ç–æ —Å–µ–π—á–∞—Å',
        '—á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å', '—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–±–∏—Ç–∏', '—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏',
        '—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å', '—â–æ —Ç—Ä–µ–±–∞ —Ä–æ–±–∏—Ç–∏', '—á—Ç–æ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å',
        
        # –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
        '—â–æ –º–µ–Ω—ñ —Ä–æ–±–∏—Ç–∏ –∑–∞—Ä–∞–∑', '—â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ', '—â–æ —Ä–æ–±–∏—Ç–∏ —Ç–µ–ø–µ—Ä',
        '—â–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏', '—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ',
        
        # English
        'what should i do', 'what now', 'what next', 'what to do', 'what i need to do',
        'what do i need', 'what should i', 'what to do next', 'what do i do',
        
        # –ö–æ—Ä–æ—Ç–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
        '—ñ —â–æ', '–∏ —á—Ç–æ', '–∞ —â–æ', '–∞ what', '–∞ —Ç–µ–ø–µ—Ä', '–∞ —Ç–µ–ø–µ—Ä—å',
        'okay, what', 'ok, what', 'so what', 'okay what', 'and what',
        '—â–æ –∂', '—á—Ç–æ –∂', '–Ω—É —â–æ', '–Ω—É —á—Ç–æ', '—ñ —â–æ –¥–∞–ª—ñ', '–∏ —á—Ç–æ –¥–∞–ª—å—à–µ'
    ]
    
    if not any(variant in q_lower for variant in what_to_do_variants):
        return None
    
    if not history or len(history) < 2:
        return None
    
    last_bot_messages = []
    count = 0
    for msg in reversed(history):
        if msg['role'] == 'bot' and count < 3:
            last_bot_messages.append(msg['content'].lower())
            count += 1
    
    if not last_bot_messages:
        return None
    
    photo_request_keywords = [
        'send 2-3 photos', 'send 2‚Äì3 photos', '–ø—Ä–∏—à–ª–∏ 2-3 —Ñ–æ—Ç–æ', '–ø—Ä–∏—à–ª–∏ 2‚Äì3 —Ñ–æ—Ç–æ',
        '–Ω–∞–¥—ñ—à–ª–∏ 2-3 —Ñ–æ—Ç–æ', '–Ω–∞–¥—ñ—à–ª–∏ 2‚Äì3 —Ñ–æ—Ç–æ', 'waiting for photos', '–∂–¥—É —Ñ–æ—Ç–æ', '—á–µ–∫–∞—é —Ñ–æ—Ç–æ',
        'how to start', '—è–∫ –ø–æ—á–∞—Ç–∏', '–∫–∞–∫ –Ω–∞—á–∞—Ç—å', 'if the format suits',
        '–ø—Ä–∏—à–ª–∏ –º–Ω–µ —Ñ–æ—Ç–æ', '–Ω–∞–¥—ñ—à–ª–∏ –º–µ–Ω—ñ —Ñ–æ—Ç–æ', 'send me photos'
    ]
    
    instructions_keywords = [
        '—ñ–Ω—Å—Ç—Ä—É–∫—Ü', '–∏–Ω—Å—Ç—Ä—É–∫—Ü', 'instruction',
        '—Ä–µ—î—Å—Ç—Ä', '—Ä–µ–≥–∏—Å—Ç—Ä', 'registr',
        '–Ω–∞–¥—ñ—à–ª–∏', '–ø—Ä–∏—à–ª–∏', 'send',
        '—Å–∫—Ä–∏–Ω', 'screenshot',
        '–∞–∫—Ç–∏–≤—É—é—Ç', '–∞–∫—Ç–∏–≤—É—é—Ç—å', 'activate',
        '–æ—Ñ—ñ—Å', '–æ—Ñ–∏—Å', 'office',
        '—Ç–µ—Å—Ç–æ–≤–∏–π –ø–µ—Ä—ñ–æ–¥', '—Ç–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä—ñ–æ–¥',
        '–∑–∞—Ä–æ–±–∏—Ç–∏', '–∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å'
    ]
    
    user = await get_user(history[0]['user_id']) if history else None
    user_lang = user['language'] if user else 'ru'
    
    for bot_msg in last_bot_messages:
        if any(kw in bot_msg for kw in photo_request_keywords):
            return {
                'ru': '–ü—Ä–∏—à–ª–∏ –º–Ω–µ 2-3 —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ (—Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, —á—Ç–æ–±—ã –±—ã–ª–æ —á—ë—Ç–∫–æ –≤–∏–¥–Ω–æ –ª–∏—Ü–æ) üì∏',
                'uk': '–ù–∞–¥—ñ—à–ª–∏ –º–µ–Ω—ñ 2-3 —Å–≤–æ—ó —Ñ–æ—Ç–æ (—Ö–æ—Ä–æ—à–æ—ó —è–∫–æ—Å—Ç—ñ, —â–æ–± –±—É–ª–æ —á—ñ—Ç–∫–æ –≤–∏–¥–Ω–æ –æ–±–ª–∏—á—á—è) üì∏',
                'en': 'Send me 2-3 photos of yourself (good quality, face clearly visible) üì∏'
            }.get(user_lang, '–ü—Ä–∏—à–ª–∏ –º–Ω–µ 2-3 —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ (—Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, —á—Ç–æ–±—ã –±—ã–ª–æ —á—ë—Ç–∫–æ –≤–∏–¥–Ω–æ –ª–∏—Ü–æ) üì∏')
        
        if '—Ñ–æ—Ç–æ' in bot_msg and ('—Ç—ñ–ª—å–∫–∏ –¥–ª—è' in bot_msg or '—Ç–æ–ª—å–∫–æ –¥–ª—è' in bot_msg or 'only for' in bot_msg):
            return {
                'ru': '–ù—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ 2-3 —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è –æ—Ç–ø—Ä–∞–≤–ª—é –∏—Ö –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –æ—Ñ–∏—Å—É üòä',
                'uk': '–ü–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –º–µ–Ω—ñ 2-3 —Å–≤–æ—ó —Ñ–æ—Ç–æ. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —è –≤—ñ–¥–ø—Ä–∞–≤–ª—é —ó—Ö –Ω–∞ —Ä–æ–∑–≥–ª—è–¥ –æ—Ñ—ñ—Å—É üòä',
                'en': 'You need to send me 2-3 photos of yourself. After that I will send them for office review üòä'
            }.get(user_lang, '–ù—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ 2-3 —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è –æ—Ç–ø—Ä–∞–≤–ª—é –∏—Ö –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –æ—Ñ–∏—Å—É üòä')
        
        if any(kw in bot_msg for kw in instructions_keywords):
            if '—Å–∫—Ä–∏–Ω' in bot_msg or 'screenshot' in bot_msg or '–æ—Ñ—ñ—Å' in bot_msg or '–æ—Ñ–∏—Å' in bot_msg:
                return {
                    'ru': '–ü—Ä–æ—Å—Ç–æ –∂–¥–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ—Ç –æ—Ñ–∏—Å–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –±—É–¥–Ω–∏–π –¥–µ–Ω—å. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç ‚Äî —Å–º–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å! üòä',
                    'uk': '–ü—Ä–æ—Å—Ç–æ —á–µ–∫–∞–π –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –≤—ñ–¥ –æ—Ñ—ñ—Å—É. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–±–æ—á–æ–≥–æ –¥–Ω—è. –Ø–∫ —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç–∏–≤—É—é—Ç—å ‚Äî –∑–º–æ–∂–µ—à –ø–æ—á–∞—Ç–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏! üòä',
                    'en': 'Just wait for activation from the office. Usually it happens the next business day. Once activated ‚Äî you can start working! üòä'
                }.get(user_lang, '–ü—Ä–æ—Å—Ç–æ –∂–¥–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ—Ç –æ—Ñ–∏—Å–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –±—É–¥–Ω–∏–π –¥–µ–Ω—å. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç ‚Äî —Å–º–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å! üòä')
            else:
                return {
                    'ru': '–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —à–∞–≥–µ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π! üòä',
                    'uk': '–î–æ—Ç—Ä–∏–º—É–π—Å—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –≤–∏—â–µ –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º. –Ø–∫—â–æ —â–æ—Å—å –Ω–µ–∑—Ä–æ–∑—É–º—ñ–ª–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫—Ä–æ—Ü—ñ ‚Äî –ø–∏—Ç–∞–π! üòä',
                    'en': 'Follow the instructions above step by step. If something is unclear at a specific step ‚Äî ask! üòä'
                }.get(user_lang, '–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —à–∞–≥–µ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π! üòä')
    
    return None

async def get_ai_response_with_retry(user_id, question, max_retries=3, is_in_groups=False):
    logger.info(f"Starting AI request for user {user_id}")
    
    user = await get_user(user_id)
    user_lang = user['language'] if user and user['language'] else 'ru'
    
    # üî¥ –ü–†–û–í–ï–†–ö–ê - –±–ª–æ–∫–∏—Ä—É–µ–º —Ä–∞–±–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –Ω–µ-—á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø
    # –ö–†–û–ú–ï –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞—Ö!
    if not is_in_groups:
        q_lower = question.lower()
        
        # –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ë–õ–û–ö–ò–†–£–Æ–¢–°–Ø –¥–ª—è –Ω–µ-—á–ª–µ–Ω–æ–≤
        # earnings –ù–ï–¢ –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ - –≤–æ–ø—Ä–æ—Å—ã –æ –∑–∞—Ä–∞–±–æ—Ç–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º!
        work_categories = [
            'hunting', 'multibeam', 'profile', 'posts', 'how_to_post',
            'live_stream', 'live_stream_start', 'live_stream_posture',
            'premium_stream', 'premium_stream_start', 'rules',
            'dislikes', 'dislikes_delete', 'auto_messages', 'tasks',
            'translator', 'contract', 'social_media'
        ]
        
        is_work_question = False
        matched_work_category = None
        
        for category in work_categories:
            if category in KNOWLEDGE_KEYWORDS:
                keywords = KNOWLEDGE_KEYWORDS[category]
                if any(keyword in q_lower for keyword in keywords):
                    is_work_question = True
                    matched_work_category = category
                    break
        
        if is_work_question:
            logger.warning(f"Work question from non-member detected: {matched_work_category}")
            return {
                'answer': get_not_in_groups_message(user_lang),
                'confidence': 100,
                'escalate': False
            }
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏–¥—É—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
    
    dislike_calc_answer = await check_dislike_calculation(question, user_lang)
    if dislike_calc_answer:
        logger.info(f"Dislike calculation for user {user_id}")
        return {
            'answer': dislike_calc_answer,
            'confidence': 95,
            'escalate': False
        }
    
    direct_answer = await check_faq_direct_match(question, user_lang)
    if direct_answer:
        logger.info(f"Direct FAQ match for user {user_id}")
        return {
            'answer': direct_answer,
            'confidence': 95,
            'escalate': False
        }
    
    history = await get_messages(user_id, limit=10)
    contextual_answer = await is_contextual_question(question, history)
    if contextual_answer:
        logger.info(f"Contextual question detected for user {user_id}")
        return {
            'answer': contextual_answer,
            'confidence': 92,
            'escalate': False
        }
    
    for attempt in range(max_retries):
        try:
            logger.info(f"AI attempt {attempt + 1}/{max_retries} for user {user_id}")
            response = await get_ai_response(user_id, question, is_in_groups)
            
            if response['escalate']:
                logger.info(f"AI escalated for user {user_id}")
                return response
            
            if response['confidence'] > 0 and response.get('answer'):
                logger.info(f"AI response successful for user {user_id}")
                return response
            
            logger.warning(f"AI returned empty/invalid response for user {user_id}, attempt {attempt + 1}")
            
            if attempt < max_retries - 1:
                await asyncio.sleep(2)
                
        except asyncio.TimeoutError:
            logger.error(f"AI timeout for user {user_id}, attempt {attempt + 1}")
            if attempt < max_retries - 1:
                await asyncio.sleep(3)
            else:
                return {
                    'answer': '',
                    'confidence': 0,
                    'escalate': True
                }
        except Exception as e:
            logger.error(f"AI error for user {user_id}, attempt {attempt + 1}: {e}")
            if attempt < max_retries - 1:
                await asyncio.sleep(3)
            else:
                return {
                    'answer': '',
                    'confidence': 0,
                    'escalate': True
                }
    
    logger.warning(f"All AI attempts failed for user {user_id}, escalating")
    return {
        'answer': '',
        'confidence': 0,
        'escalate': True
    }

async def get_ai_response(user_id, question, is_in_groups=False):
    user = await get_user(user_id)
    user_lang = user['language'] if user and user['language'] else 'ru'
    
    if not user_lang or user_lang not in ['ru', 'uk', 'en']:
        from utils.language_detector import detect_language
        detected_lang = detect_language(question)
        user_lang = detected_lang if detected_lang in ['ru', 'uk', 'en'] else 'ru'
        logger.info(f"Language fallback for user {user_id}: detected {user_lang} from question")
    
    if await check_forbidden_topics(question):
        logger.info(f"Forbidden topic for user {user_id}")
        return {
            'answer': UNIVERSAL_RESPONSE.get(user_lang, UNIVERSAL_RESPONSE['ru']),
            'confidence': 100,
            'escalate': False
        }
    
    logger.info(f"Building context for user {user_id}")
    context_prompt = await build_context_prompt(user_id, question, is_in_groups)
    
    try:
        logger.info(f"Calling AI for user {user_id}")
        
        response = await asyncio.wait_for(
            asyncio.to_thread(
                client.chat.completions.create,
                model="gpt-4",
                messages=[
                    {"role": "system", "content": SYSTEM_PROMPT},
                    {"role": "user", "content": context_prompt}
                ]
            ),
            timeout=45.0
        )
        
        if not response or not hasattr(response, 'choices') or not response.choices:
            logger.warning(f"Empty AI response for user {user_id}")
            return {
                'answer': '',
                'confidence': 0,
                'escalate': True
            }
        
        content = response.choices[0].message.content
        content = content.strip() if hasattr(content, 'strip') else str(content).strip()
        
        if is_g4f_error(content):
            logger.warning(f"g4f error detected for user {user_id}: {content[:100]}")
            return {
                'answer': '',
                'confidence': 0,
                'escalate': True
            }
        
        if content.startswith('```json'):
            content = content[7:-3].strip()
        elif content.startswith('```'):
            content = content[3:-3].strip()
        
        content = content.replace('**', '').replace('__', '').replace('*', '').replace('_', '')
        
        try:
            result = json.loads(content)
        except json.JSONDecodeError:
            logger.info(f"Non-JSON response for user {user_id}, using as plain text")
            
            if len(content) > 4000:
                content = content[:3800] + "\n\n(–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏...)"
            
            return {
                'answer': content,
                'confidence': 75,
                'escalate': False
            }
        
        if not isinstance(result, dict):
            answer_text = str(result)
            if len(answer_text) > 4000:
                answer_text = answer_text[:3800] + "\n\n(–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏...)"
            
            return {
                'answer': answer_text,
                'confidence': 75,
                'escalate': False
            }
        
        if 'answer' not in result:
            result['answer'] = content
        if 'confidence' not in result:
            result['confidence'] = 70
        if 'escalate' not in result:
            result['escalate'] = result['confidence'] < AI_CONFIDENCE_THRESHOLD
        
        if is_g4f_error(str(result.get('answer', ''))):
            logger.warning(f"g4f error in parsed answer for user {user_id}")
            return {
                'answer': '',
                'confidence': 0,
                'escalate': True
            }
        
        if len(str(result.get('answer', ''))) > 4000:
            result['answer'] = str(result['answer'])[:3800] + "\n\n(–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏...)"
        
        result['answer'] = str(result['answer']).replace('**', '').replace('__', '').replace('*', '').replace('_', '')
        
        logger.info(f"AI response for {user_id}: conf={result['confidence']}, esc={result['escalate']}")
        
        return result
        
    except asyncio.TimeoutError:
        logger.error(f"AI timeout for {user_id}")
        raise
    except Exception as e:
        logger.error(f"AI error for {user_id}: {e}")
        raise
